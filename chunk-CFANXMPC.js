import{a as Un,b as Gn,c as no}from"./chunk-K46JGAHC.js";import{A as wo,B as xo,C as Co,a as so,b as lo,c as co,d as Wt,e as qt,f as Qt,g as ot,h as Yt,i as ho,j as Zt,k as Xt,l as Jt,m as ei,n as ti,o as po,p as ii,q as mo,r as Oi,s as uo,t as go,v as fo,w as _o,x as vo,y as yo,z as bo}from"./chunk-U326KBZ4.js";import{b as $t,c as jt}from"./chunk-XV6KHAOI.js";import{B as Ut,L as Qn,P as Gt,Q as Yn,Z as Zn,ba as Xn,ca as Jn,da as eo,ea as nt,fa as $e,ga as to,i as Kn,ja as io,k as Ge,ka as oo,na as ro,q as $n,r as jn,s as Kt,u as yt,wa as ao,x as Wn,y as Le,z as qn}from"./chunk-UW4ZNYV7.js";import{$ as ue,Ab as Ve,B as Si,Bc as Bt,Cc as Vt,Da as $,Ec as Ht,Fa as Rt,G as Rn,H as ki,Ha as we,Hc as Ue,Ia as Qe,Ic as zt,Jb as q,Ka as Te,Kb as z,Lb as K,M as Ii,Mb as Nt,N as Pi,Nb as vt,Nc as ke,Ob as ge,Oc as zn,P as Be,Pb as fe,Qb as S,R as An,Rb as f,Rc as ee,Sb as y,Sc as ne,Tb as W,Ub as Ft,Vb as Ot,Xb as Ne,Yb as J,Z as gt,Zb as Ye,_ as We,a as G,ac as M,b as Re,ba as qe,bc as Ln,c as Tn,cb as Fn,cc as w,d as Sn,dc as He,ea as Mi,ec as ze,f as kn,fa as ft,fb as _,fc as Lt,ga as he,gc as ce,h as et,hc as ae,ia as be,ic as se,j as Ti,ka as b,kb as Ai,l as O,lb as Ni,m as Ee,mb as Fi,mc as Ke,nc as Se,o as In,ob as At,oc as Q,p as Pn,pc as Bn,qa as R,qb as tt,qc as Fe,ra as A,rc as k,sa as Ae,sc as Y,t as X,ta as Nn,tc as Oe,ua as Ri,ub as B,uc as Vn,v as Mn,va as Mt,vb as pe,wb as j,wc as it,x as me,xb as On,xc as Z,y as ut,ya as F,yc as Hn,za as _t,zb as xe}from"./chunk-HYQBNKYJ.js";var pa=["mat-internal-form-field",""],ma=["*"],Do=(()=>{class o{labelPosition;static \u0275fac=function(i){return new(i||o)};static \u0275cmp=B({type:o,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(i,n){i&2&&Q("mdc-form-field--align-end",n.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},attrs:pa,ngContentSelectors:ma,decls:1,vars:0,template:function(i,n){i&1&&(He(),ze(0))},styles:[`.mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}
`],encapsulation:2,changeDetection:0})}return o})();var fa=(o,t)=>t.value;function _a(o,t){if(o&1&&(f(0,"mat-option",2),k(1),y()),o&2){let e=w();_(),Y(e.firstOption)}}function va(o,t){if(o&1&&(f(0,"mat-option",5),k(1),y()),o&2){let e=t.$implicit;S("value",e.value),_(),Y(e.label)}}function ya(o,t){if(o&1&&ge(0,va,2,2,"mat-option",5,fa),o&2){let e=w();fe(e.options)}}var ni=class o{label="";options=[];hint="";prefix="";suffix="";firstOption="";classes="margin-bottom-medium";required=!1;disabled=!1;sessionStorage=!1;appearance="outline";valueChange=new F;_value=$("");set value(t){this._value.set(t),this.sessionStorage&&sessionStorage.setItem(this.label,String(t))}get value(){return this._value()}setValue(t){let e=this.options.some(i=>String(i.value)===String(t));this._value.set(e?t:""),this.valueChange.emit(e?String(t):""),this.sessionStorage&&(e?sessionStorage.setItem(this.label,String(t)):sessionStorage.removeItem(this.label))}ngAfterViewInit(){if(this.sessionStorage){let t=sessionStorage.getItem(this.label);t&&(this.setValue(t),this.valueChange.emit(String(t)))}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=B({type:o,selectors:[["app-select"]],inputs:{label:"label",options:"options",hint:"hint",prefix:"prefix",suffix:"suffix",firstOption:"firstOption",classes:"classes",required:"required",disabled:"disabled",sessionStorage:"sessionStorage",appearance:"appearance",value:"value"},outputs:{valueChange:"valueChange"},decls:12,vars:13,consts:[[3,"appearance"],["name","",3,"ngModelChange","ngModel","required","disabled"],["value",""],["matTextPrefix",""],["matTextSuffix",""],[3,"value"]],template:function(e,i){e&1&&(f(0,"mat-form-field",0)(1,"mat-label"),k(2),y(),f(3,"mat-select",1),M("ngModelChange",function(r){return i.setValue(r)}),z(4,_a,2,1,"mat-option",2),z(5,ya,2,0),y(),f(6,"mat-hint"),k(7),y(),f(8,"span",3),k(9),y(),f(10,"span",4),k(11),y()()),e&2&&(Fe(it("width-100 ",i.classes)),S("appearance",i.appearance),_(2),Y(i.label),_(),S("ngModel",i.value)("required",i.required)("disabled",i.disabled),_(),K(i.firstOption?4:-1),_(),K(i.options?5:-1),_(2),Y(i.hint),_(2),Y(i.prefix),_(2),Y(i.suffix))},dependencies:[Ge,ot,Wt,Qt,qt,ii,ti,Zt,Xt,Jt,ei,go,uo,mo,Oi],encapsulation:2})};var ba={name:"Buffer Time",description:"Accumulates incoming samples into a sliding time window.",tooltip:"Stores samples for the specified number of seconds based on the sample rate and outputs the buffered signal.",kernel:"ts.bufferTime",mode:"transformer",type:"transformer",classification:{domain:"Process",group:"Buffer"},controls:[{type:"input",label:"seconds",value:1,min:1,max:30}],params:[{label:"sampleRate",default:1}]};var wa={name:"Noise Generator",description:"Gaussian noise noise-generator",kernel:"ts.noiseGenerator",out:["sampleRate","channelNames","blockSize","channels"],mode:"generator",type:"generator",classification:{domain:"Source",group:"Streams"}};var xa={name:"Timeseries Plot",description:"Plots time-series channels.",tooltip:"Consumes one or more time-series channels and renders them as line plots, with optional affine scaling and vertical spacing for visual separation.",kernel:"ts.plot",mode:"consumer",type:"visualization",controls:[{type:"input",label:"gain",value:1,min:-10,max:10},{type:"input",label:"spacing",value:0,min:-100,max:100}],params:[{label:"sampleRate",default:1},{label:"tickText",default:[]},{label:"xlabel",default:"Time (s)",hide:!0},{label:"ylabel",default:"Channels",hide:!0}],classification:{domain:"Visualize",group:"Time"}};var Ca={name:"Sum",description:"Sums all input channels sample-wise into a single output channel.",tooltip:"All channels must be time-aligned and have equal length.",kernel:"ts.sum",mode:"merger",type:"merge",classification:{domain:"Process",group:"Transformer"}};function Vi(o){let t=o.cloneNode(!0),e=t.querySelectorAll("[id]"),i=o.nodeName.toLowerCase();t.removeAttribute("id");for(let n=0;n<e.length;n++)e[n].removeAttribute("id");return i==="canvas"?So(o,t):(i==="input"||i==="select"||i==="textarea")&&To(o,t),Eo("canvas",o,t,So),Eo("input, textarea, select",o,t,To),t}function Eo(o,t,e,i){let n=t.querySelectorAll(o);if(n.length){let r=e.querySelectorAll(o);for(let a=0;a<n.length;a++)i(n[a],r[a])}}var Da=0;function To(o,t){t.type!=="file"&&(t.value=o.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${Da++}`)}function So(o,t){let e=t.getContext("2d");if(e)try{e.drawImage(o,0,0)}catch{}}function ji(o){let t=o.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function Hi(o,t,e){let{top:i,bottom:n,left:r,right:a}=o;return e>=i&&e<=n&&t>=r&&t<=a}function Ea(o,t){let e=t.left<o.left,i=t.left+t.width>o.right,n=t.top<o.top,r=t.top+t.height>o.bottom;return e||i||n||r}function xt(o,t,e){o.top+=t,o.bottom=o.top+o.height,o.left+=e,o.right=o.left+o.width}function ko(o,t,e,i){let{top:n,right:r,bottom:a,left:s,width:c,height:d}=o,p=c*t,v=d*t;return i>n-v&&i<a+v&&e>s-p&&e<r+p}var oi=class{_document;positions=new Map;constructor(t){this._document=t}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:ji(e)})})}handleScroll(t){let e=yt(t),i=this.positions.get(e);if(!i)return null;let n=i.scrollPosition,r,a;if(e===this._document){let d=this.getViewportScrollPosition();r=d.top,a=d.left}else r=e.scrollTop,a=e.scrollLeft;let s=n.top-r,c=n.left-a;return this.positions.forEach((d,p)=>{d.clientRect&&e!==p&&e.contains(p)&&xt(d.clientRect,s,c)}),n.top=r,n.left=a,{top:s,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function Vo(o,t){let e=o.rootNodes;if(e.length===1&&e[0].nodeType===t.ELEMENT_NODE)return e[0];let i=t.createElement("div");return e.forEach(n=>i.appendChild(n)),i}function Wi(o,t,e){for(let i in t)if(t.hasOwnProperty(i)){let n=t[i];n?o.setProperty(i,n,e?.has(i)?"important":""):o.removeProperty(i)}return o}function at(o,t){let e=t?"":"none";Wi(o.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function Io(o,t,e){Wi(o.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function ri(o,t){return t&&t!="none"?o+" "+t:o}function Po(o,t){o.style.width=`${t.width}px`,o.style.height=`${t.height}px`,o.style.transform=Ct(t.left,t.top)}function Ct(o,t){return`translate3d(${Math.round(o)}px, ${Math.round(t)}px, 0)`}function Mo(o){let t=o.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(o)*t}function Ta(o){let t=getComputedStyle(o),e=Li(t,"transition-property"),i=e.find(s=>s==="transform"||s==="all");if(!i)return 0;let n=e.indexOf(i),r=Li(t,"transition-duration"),a=Li(t,"transition-delay");return Mo(r[n])+Mo(a[n])}function Li(o,t){return o.getPropertyValue(t).split(",").map(i=>i.trim())}var Sa=new Set(["position"]),zi=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(t,e,i,n,r,a,s,c,d,p){this._document=t,this._rootElement=e,this._direction=i,this._initialDomRect=n,this._previewTemplate=r,this._previewClass=a,this._pickupPositionOnPage=s,this._initialTransform=c,this._zIndex=d,this._renderer=p}attach(t){this._preview=this._createPreview(),t.appendChild(this._preview),Ro(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(t){this._preview.style.transform=t}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(t){this._preview.classList.add(t)}getTransitionDuration(){return Ta(this._preview)}addEventListener(t,e){return this._renderer.listen(this._preview,t,e)}_createPreview(){let t=this._previewTemplate,e=this._previewClass,i=t?t.template:null,n;if(i&&t){let r=t.matchSize?this._initialDomRect:null,a=t.viewContainer.createEmbeddedView(i,t.context);a.detectChanges(),n=Vo(a,this._document),this._previewEmbeddedView=a,t.matchSize?Po(n,r):n.style.transform=Ct(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=Vi(this._rootElement),Po(n,this._initialDomRect),this._initialTransform&&(n.style.transform=this._initialTransform);return Wi(n.style,{"pointer-events":"none",margin:Ro(n)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},Sa),at(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("popover","manual"),n.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(r=>n.classList.add(r)):n.classList.add(e)),n}};function Ro(o){return"showPopover"in o}var ka={passive:!0},Ao={passive:!1},Ia={passive:!1,capture:!0},Pa=800,No="cdk-drag-placeholder",Fo=new Set(["position"]),Ki=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=$(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new O;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=et.EMPTY;_pointerUpSubscription=et.EMPTY;_scrollSubscription=et.EMPTY;_resizeSubscription=et.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(t){t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(e=>at(e,t)))}_disabled=!1;beforeStarted=new O;started=new O;released=new O;ended=new O;entered=new O;exited=new O;dropped=new O;moved=this._moveEvents;data;constrainPosition;constructor(t,e,i,n,r,a,s){this._config=e,this._document=i,this._ngZone=n,this._viewportRuler=r,this._dragDropRegistry=a,this._renderer=s,this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new oi(i),a.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>Le(i)),this._handles.forEach(i=>at(i,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){let e=Le(t);if(e!==this._rootElement){this._removeRootElementListeners();let i=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[i.listen(e,"mousedown",this._pointerDown,Ao),i.listen(e,"touchstart",this._pointerDown,ka),i.listen(e,"dragstart",this._nativeDragStart,Ao)]),this._initialTransform=void 0,this._rootElement=e}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?Le(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&Ea(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let t=this._boundaryElement.getBoundingClientRect(),e=this._rootElement.getBoundingClientRect(),i=0,n=0;e.left<t.left?i=t.left-e.left:e.right>t.right&&(i=t.right-e.right),e.top<t.top?n=t.top-e.top:e.bottom>t.bottom&&(n=t.bottom-e.bottom);let r=this._activeTransform.x,a=this._activeTransform.y,s=r+i,c=a+n;this._rootElement.style.transform=Ct(s,c),this._activeTransform={x:s,y:c},this._passiveTransform={x:s,y:c}}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),at(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),at(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){let t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){let t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)};_pointerMove=t=>{let e=this._getPointerPositionOnPage(t);if(!this._hasStartedDragging()){let n=Math.abs(e.x-this._pickupPositionOnPage.x),r=Math.abs(e.y-this._pickupPositionOnPage.y);if(n+r>=this._config.dragStartThreshold){let s=Date.now()>=this._dragStartTime+this._getDragStartDelay(t),c=this._dropContainer;if(!s){this._endDragSequence(t);return}(!c||!c.isDragging()&&!c.isReceiving())&&(t.cancelable&&t.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(t)))}return}t.cancelable&&t.preventDefault();let i=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,e);else{let n=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,r=this._activeTransform;r.x=i.x-n.x+this._passiveTransform.x,r.y=i.y-n.y+this._passiveTransform.y,this._applyRootElementTransform(r.x,r.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:t,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})};_pointerUp=t=>{this._endDragSequence(t)};_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){bt(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),i=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(e,"selectstart",Ma,Ia)}),i){let n=this._rootElement,r=n.parentNode,a=this._placeholder=this._createPlaceholderElement(),s=this._marker=this._marker||this._document.createComment("");r.insertBefore(s,n),this._initialTransform=n.style.transform||"",this._preview=new zi(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(r,e)),Io(n,!1,Fo),this._document.body.appendChild(r.replaceChild(a,n)),this.started.next({source:this,event:t}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();let i=this.isDragging(),n=bt(e),r=!n&&e.button!==0,a=this._rootElement,s=yt(e),c=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+Pa>Date.now(),d=n?jn(e):$n(e);if(s&&s.draggable&&e.type==="mousedown"&&e.preventDefault(),i||r||c||d)return;if(this._handles.length){let u=a.style;this._rootElementTapHighlight=u.webkitTapHighlightColor||"",u.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(u=>this._updateOnScroll(u)),this._boundaryElement&&(this._boundaryRect=ji(this._boundaryElement));let p=this._previewTemplate;this._pickupPositionInElement=p&&p.template&&!p.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,t,e);let v=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:v.x,y:v.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){Io(this._rootElement,!0,Fo),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,i=e.getItemIndex(this),n=this._getPointerPositionOnPage(t),r=this._getDragDistance(n),a=e._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:r,dropPoint:n,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:r,dropPoint:n,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,a,r,n,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:n}){let r=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(()=>{let a=this._dropContainer.getItemIndex(this),s=this._dropContainer.getItemAtIndex(a+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(r,this._dropContainer,s),this._dropContainer=r,this._dropContainer.enter(this,t,e,r===this._initialContainer&&r.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:r,currentIndex:r.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,n),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let t=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let n=s=>{(!s||this._preview&&yt(s)===this._preview.element&&s.propertyName==="transform")&&(a(),i(),clearTimeout(r))},r=setTimeout(n,e*1.5),a=this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){let t=this._placeholderTemplate,e=t?t.template:null,i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=Vo(this._placeholderRef,this._document)):i=Vi(this._rootElement),i.style.pointerEvents="none",i.classList.add(No),i}_getPointerPositionInElement(t,e,i){let n=e===this._rootElement?null:e,r=n?n.getBoundingClientRect():t,a=bt(i)?i.targetTouches[0]:i,s=this._getViewportScrollPosition(),c=a.pageX-r.left-s.left,d=a.pageY-r.top-s.top;return{x:r.left-t.left+c,y:r.top-t.top+d}}_getPointerPositionOnPage(t){let e=this._getViewportScrollPosition(),i=bt(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,n=i.pageX-e.left,r=i.pageY-e.top;if(this._ownerSVGElement){let a=this._ownerSVGElement.getScreenCTM();if(a){let s=this._ownerSVGElement.createSVGPoint();return s.x=n,s.y=r,s.matrixTransform(a.inverse())}}return{x:n,y:r}}_getConstrainedPointerPosition(t){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:n}=this.constrainPosition?this.constrainPosition(t,this,this._initialDomRect,this._pickupPositionInElement):t;if(this.lockAxis==="x"||e==="x"?n=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:r,y:a}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,s=this._boundaryRect,{width:c,height:d}=this._getPreviewRect(),p=s.top+a,v=s.bottom-(d-a),u=s.left+r,x=s.right-(c-r);i=Oo(i,u,x),n=Oo(n,p,v)}return{x:i,y:n}}_updatePointerDirectionDelta(t){let{x:e,y:i}=t,n=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,a=Math.abs(e-r.x),s=Math.abs(i-r.y);return a>this._config.pointerDirectionChangeThreshold&&(n.x=e>r.x?1:-1,r.x=e),s>this._config.pointerDirectionChangeThreshold&&(n.y=i>r.y?1:-1,r.y=i),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,at(this._rootElement,t))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(t=>t()),this._rootElementCleanups=void 0}_applyRootElementTransform(t,e){let i=1/this.scale,n=Ct(t*i,e*i),r=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=r.transform&&r.transform!="none"?r.transform:""),r.transform=ri(n,this._initialTransform)}_applyPreviewTransform(t,e){let i=this._previewTemplate?.template?void 0:this._initialTransform,n=Ct(t,e);this._preview.setTransform(ri(n,i))}_getDragDistance(t){let e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(t===0&&e===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(n.width===0&&n.height===0||i.width===0&&i.height===0)return;let r=n.left-i.left,a=i.right-n.right,s=n.top-i.top,c=i.bottom-n.bottom;n.width>i.width?(r>0&&(t+=r),a>0&&(t-=a)):t=0,n.height>i.height?(s>0&&(e+=s),c>0&&(e-=c)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){let e=this.dragStartDelay;return typeof e=="number"?e:bt(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){let e=this._parentPositions.handleScroll(t);if(e){let i=yt(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&xt(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Kt(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){let i=this._previewContainer||"global";if(i==="parent")return t;if(i==="global"){let n=this._document;return e||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return Le(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=t=>{if(this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&t.preventDefault()}else this.disabled||t.preventDefault()};_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}_conditionallyInsertAnchor(t,e,i){if(t===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(e===this._initialContainer&&e.hasAnchor){let n=this._anchor??=Vi(this._placeholder);n.classList.remove(No),n.classList.add("cdk-drag-anchor"),n.style.transform="",i?i.before(n):Le(e.element).appendChild(n)}}};function Oo(o,t,e){return Math.max(t,Math.min(e,o))}function bt(o){return o.type[0]==="t"}function Ma(o){o.preventDefault()}function Ho(o,t,e){let i=Lo(t,o.length-1),n=Lo(e,o.length-1);if(i===n)return;let r=o[i],a=n<i?-1:1;for(let s=i;s!==n;s+=a)o[s]=o[s+a];o[n]=r}function Lo(o,t){return Math.max(0,Math.min(t,o))}var ai=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(t){this._dragDropRegistry=t}_previousSwap={drag:null,delta:0,overlaps:!1};start(t){this.withItems(t)}sort(t,e,i,n){let r=this._itemPositions,a=this._getItemIndexFromPointerPosition(t,e,i,n);if(a===-1&&r.length>0)return null;let s=this.orientation==="horizontal",c=r.findIndex(T=>T.drag===t),d=r[a],p=r[c].clientRect,v=d.clientRect,u=c>a?1:-1,x=this._getItemOffsetPx(p,v,u),V=this._getSiblingOffsetPx(c,r,u),C=r.slice();return Ho(r,c,a),r.forEach((T,E)=>{if(C[E]===T)return;let m=T.drag===t,oe=m?x:V,Ie=m?t.getPlaceholderElement():T.drag.getRootElement();T.offset+=oe;let Ce=Math.round(T.offset*(1/T.drag.scale));s?(Ie.style.transform=ri(`translate3d(${Ce}px, 0, 0)`,T.initialTransform),xt(T.clientRect,0,oe)):(Ie.style.transform=ri(`translate3d(0, ${Ce}px, 0)`,T.initialTransform),xt(T.clientRect,oe,0))}),this._previousSwap.overlaps=Hi(v,e,i),this._previousSwap.drag=d.drag,this._previousSwap.delta=s?n.x:n.y,{previousIndex:c,currentIndex:a}}enter(t,e,i,n){let r=n==null||n<0?this._getItemIndexFromPointerPosition(t,e,i):n,a=this._activeDraggables,s=a.indexOf(t),c=t.getPlaceholderElement(),d=a[r];if(d===t&&(d=a[r+1]),!d&&(r==null||r===-1||r<a.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(d=a[0]),s>-1&&a.splice(s,1),d&&!this._dragDropRegistry.isDragging(d)){let p=d.getRootElement();p.parentElement.insertBefore(c,p),a.splice(r,0,t)}else this._element.appendChild(c),a.push(t);c.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables?.forEach(t=>{let e=t.getRootElement();if(e){let i=this._itemPositions.find(n=>n.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return this._getVisualItemPositions().findIndex(e=>e.drag===t)}getItemAtIndex(t){return this._getVisualItemPositions()[t]?.drag||null}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{xt(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(t){this._element=t}_cacheItemPositions(){let t=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:ji(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(t,e,i){let n=this.orientation==="horizontal",r=n?e.left-t.left:e.top-t.top;return i===-1&&(r+=n?e.width-t.width:e.height-t.height),r}_getSiblingOffsetPx(t,e,i){let n=this.orientation==="horizontal",r=e[t].clientRect,a=e[t+i*-1],s=r[n?"width":"height"]*i;if(a){let c=n?"left":"top",d=n?"right":"bottom";i===-1?s-=a.clientRect[c]-r[d]:s+=r[c]-a.clientRect[d]}return s}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,n=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let a=i[i.length-1].clientRect;return n?t>=a.right:e>=a.bottom}else{let a=i[0].clientRect;return n?t<=a.left:e<=a.top}}_getItemIndexFromPointerPosition(t,e,i,n){let r=this.orientation==="horizontal",a=this._itemPositions.findIndex(({drag:s,clientRect:c})=>{if(s===t)return!1;if(n){let d=r?n.x:n.y;if(s===this._previousSwap.drag&&this._previousSwap.overlaps&&d===this._previousSwap.delta)return!1}return r?e>=Math.floor(c.left)&&e<Math.floor(c.right):i>=Math.floor(c.top)&&i<Math.floor(c.bottom)});return a===-1||!this._sortPredicate(a,t)?-1:a}},Ui=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(t,e){this._document=t,this._dragDropRegistry=e}start(t){let e=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<e.length;i++){let n=e[i];this._relatedNodes.push([n,n.nextSibling])}this.withItems(t)}sort(t,e,i,n){let r=this._getItemIndexFromPointerPosition(t,e,i),a=this._previousSwap;if(r===-1||this._activeItems[r]===t)return null;let s=this._activeItems[r];if(a.drag===s&&a.overlaps&&a.deltaX===n.x&&a.deltaY===n.y)return null;let c=this.getItemIndex(t),d=t.getPlaceholderElement(),p=s.getRootElement();r>c?p.after(d):p.before(d),Ho(this._activeItems,c,r);let v=this._getRootNode().elementFromPoint(e,i);return a.deltaX=n.x,a.deltaY=n.y,a.drag=s,a.overlaps=p===v||p.contains(v),{previousIndex:c,currentIndex:r}}enter(t,e,i,n){let r=this._activeItems.indexOf(t);r>-1&&this._activeItems.splice(r,1);let a=n==null||n<0?this._getItemIndexFromPointerPosition(t,e,i):n;a===-1&&(a=this._getClosestItemIndexToPointer(t,e,i));let s=this._activeItems[a];s&&!this._dragDropRegistry.isDragging(s)?(this._activeItems.splice(a,0,t),s.getRootElement().before(t.getPlaceholderElement())):(this._activeItems.push(t),this._element.appendChild(t.getPlaceholderElement()))}withItems(t){this._activeItems=t.slice()}withSortPredicate(t){this._sortPredicate=t}reset(){let t=this._element,e=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[n,r]=this._relatedNodes[i];n.parentNode===t&&n.nextSibling!==r&&(r===null?t.appendChild(n):r.parentNode===t&&t.insertBefore(n,r))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(t){return this._activeItems.indexOf(t)}getItemAtIndex(t){return this._activeItems[t]||null}updateOnScroll(){this._activeItems.forEach(t=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(t){t!==this._element&&(this._element=t,this._rootNode=void 0)}_getItemIndexFromPointerPosition(t,e,i){let n=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(i)),r=n?this._activeItems.findIndex(a=>{let s=a.getRootElement();return n===s||s.contains(n)}):-1;return r===-1||!this._sortPredicate(r,t)?-1:r}_getRootNode(){return this._rootNode||(this._rootNode=Kt(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(t,e,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let n=1/0,r=-1;for(let a=0;a<this._activeItems.length;a++){let s=this._activeItems[a];if(s!==t){let{x:c,y:d}=s.getRootElement().getBoundingClientRect(),p=Math.hypot(e-c,i-d);p<n&&(n=p,r=a)}}return r}},Bo=.05,zo=.05,_e=(function(o){return o[o.NONE=0]="NONE",o[o.UP=1]="UP",o[o.DOWN=2]="DOWN",o})(_e||{}),le=(function(o){return o[o.NONE=0]="NONE",o[o.LEFT=1]="LEFT",o[o.RIGHT=2]="RIGHT",o})(le||{}),Gi=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new O;entered=new O;exited=new O;dropped=new O;sorted=new O;receivingStarted=new O;receivingStopped=new O;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=et.EMPTY;_verticalScrollDirection=_e.NONE;_horizontalScrollDirection=le.NONE;_scrollNode;_stopScrollTimers=new O;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(t,e,i,n,r){this._dragDropRegistry=e,this._ngZone=n,this._viewportRuler=r;let a=this.element=Le(t);this._document=i,this.withOrientation("vertical").withElementContainer(a),e.registerDropContainer(this),this._parentPositions=new oi(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,n){this._draggingStarted(),n==null&&this.sortingDisabled&&(n=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,n,r,a,s,c={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:n,isPointerOverContainer:r,distance:a,dropPoint:s,event:c})}withItems(t){let e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(n=>n.isDragging()).every(n=>t.indexOf(n)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._direction=t,this._sortStrategy instanceof ai&&(this._sortStrategy.direction=t),this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){if(t==="mixed")this._sortStrategy=new Ui(this._document,this._dragDropRegistry);else{let e=new ai(this._dragDropRegistry);e.direction=this._direction,e.orientation=t,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,i)=>this.sortPredicate(e,i,this)),this}withScrollableParents(t){let e=this._container;return this._scrollableElements=t.indexOf(e)===-1?[e,...t]:t.slice(),this}withElementContainer(t){if(t===this._container)return this;let e=Le(this.element),i=this._scrollableElements.indexOf(this._container),n=this._scrollableElements.indexOf(t);return i>-1&&this._scrollableElements.splice(i,1),n>-1&&this._scrollableElements.splice(n,1),this._sortStrategy&&this._sortStrategy.withElementContainer(t),this._cachedShadowRoot=null,this._scrollableElements.unshift(t),this._container=t,this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}getItemAtIndex(t){return this._isDragging?this._sortStrategy.getItemAtIndex(t):this._draggables[t]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,n){if(this.sortingDisabled||!this._domRect||!ko(this._domRect,Bo,e,i))return;let r=this._sortStrategy.sort(t,e,i,n);r&&this.sorted.next({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,n=_e.NONE,r=le.NONE;if(this._parentPositions.positions.forEach((a,s)=>{s===this._document||!a.clientRect||i||ko(a.clientRect,Bo,t,e)&&([n,r]=Ra(s,a.clientRect,this._direction,t,e),(n||r)&&(i=s))}),!n&&!r){let{width:a,height:s}=this._viewportRuler.getViewportSize(),c={width:a,height:s,top:0,right:a,bottom:s,left:0};n=Ko(c,e),r=Uo(c,t),i=window}i&&(n!==this._verticalScrollDirection||r!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=r,this._scrollNode=i,(n||r)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let t=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let t=this._container.style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),Rn(0,In).pipe(ue(this._stopScrollTimers)).subscribe(()=>{let t=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===_e.UP?t.scrollBy(0,-e):this._verticalScrollDirection===_e.DOWN&&t.scrollBy(0,e),this._horizontalScrollDirection===le.LEFT?t.scrollBy(-e,0):this._horizontalScrollDirection===le.RIGHT&&t.scrollBy(e,0)})};_isOverContainer(t,e){return this._domRect!=null&&Hi(this._domRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(n=>n._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._domRect||!Hi(this._domRect,e,i)||!this.enterPredicate(t,this))return!1;let n=this._getShadowRoot().elementFromPoint(e,i);return n?n===this._container||this._container.contains(n):!1}_startReceiving(t,e){let i=this._activeSiblings;!i.has(t)&&e.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let t=Kt(this._container);this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}};function Ko(o,t){let{top:e,bottom:i,height:n}=o,r=n*zo;return t>=e-r&&t<=e+r?_e.UP:t>=i-r&&t<=i+r?_e.DOWN:_e.NONE}function Uo(o,t){let{left:e,right:i,width:n}=o,r=n*zo;return t>=e-r&&t<=e+r?le.LEFT:t>=i-r&&t<=i+r?le.RIGHT:le.NONE}function Ra(o,t,e,i,n){let r=Ko(t,n),a=Uo(t,i),s=_e.NONE,c=le.NONE;if(r){let d=o.scrollTop;r===_e.UP?d>0&&(s=_e.UP):o.scrollHeight-d>o.clientHeight&&(s=_e.DOWN)}if(a){let d=o.scrollLeft;e==="rtl"?a===le.RIGHT?d<0&&(c=le.RIGHT):o.scrollWidth+d>o.clientWidth&&(c=le.LEFT):a===le.LEFT?d>0&&(c=le.LEFT):o.scrollWidth-d>o.clientWidth&&(c=le.RIGHT)}return[s,c]}var wt={capture:!0},Bi={passive:!1,capture:!0},Aa=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275cmp=B({type:o,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(i,n){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return o})(),qi=(()=>{class o{_ngZone=b(_t);_document=b(Mt);_styleLoader=b(Ut);_renderer=b(Fi).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new O;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=$([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new O;pointerUp=new O;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,Bi)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(e,i){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(Aa),this._activeDragInstances.update(n=>[...n,e]),this._activeDragInstances().length===1)){let n=i.type.startsWith("touch"),r=s=>this.pointerUp.next(s),a=[["scroll",s=>this._scroll.next(s),wt],["selectstart",this._preventDefaultWhileDragging,Bi]];n?a.push(["touchend",r,wt],["touchcancel",r,wt]):a.push(["mouseup",r,wt]),n||a.push(["mousemove",s=>this.pointerMove.next(s),Bi]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=a.map(([s,c,d])=>this._renderer.listen(this._document,s,c,d))})}}stopDragging(e){this._activeDragInstances.update(i=>{let n=i.indexOf(e);return n>-1?(i.splice(n,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let i=[this._scroll];return e&&e!==this._document&&i.push(new Ti(n=>this._ngZone.runOutsideAngular(()=>{let r=this._renderer.listen(e,"scroll",a=>{this._activeDragInstances().length&&n.next(a)},wt);return()=>{r()}}))),ki(...i)}registerDirectiveNode(e,i){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,i)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(i){return new(i||o)};static \u0275prov=ft({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Na={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Fa=(()=>{class o{_document=b(Mt);_ngZone=b(_t);_viewportRuler=b(ro);_dragDropRegistry=b(qi);_renderer=b(Fi).createRenderer(null,null);constructor(){}createDrag(e,i=Na){return new Ki(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new Gi(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(i){return new(i||o)};static \u0275prov=ft({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),$i=new be("CDK_DRAG_PARENT");var Go=new be("CdkDragHandle"),$o=(()=>{class o{element=b(Te);_parentDrag=b($i,{optional:!0,skipSelf:!0});_dragDropRegistry=b(qi);_stateChanges=new O;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let e=this.element.nativeElement.parentElement;for(;e;){let i=this._dragDropRegistry.getDragDirectiveForNode(e);if(i){this._parentDrag=i,i._addHandle(this);break}e=e.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(i){return new(i||o)};static \u0275dir=j({type:o,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",ee]},features:[Z([{provide:Go,useExisting:o}])]})}return o})(),Oa=new be("CDK_DRAG_CONFIG"),La=new be("CdkDropList"),Qi=(()=>{class o{element=b(Te);dropContainer=b(La,{optional:!0,skipSelf:!0});_ngZone=b(_t);_viewContainerRef=b(tt);_dir=b(nt,{optional:!0});_changeDetectorRef=b(ke);_selfHandle=b(Go,{optional:!0,self:!0});_parentDrag=b($i,{optional:!0,skipSelf:!0});_dragDropRegistry=b(qi);_destroyed=new O;_handles=new Ee([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new F;released=new F;ended=new F;entered=new F;exited=new F;dropped=new F;moved=new Ti(e=>{let i=this._dragRef.moved.pipe(me(n=>({source:this,pointerPosition:n.pointerPosition,event:n.event,delta:n.delta,distance:n.distance}))).subscribe(e);return()=>{i.unsubscribe()}});_injector=b(Ri);constructor(){let e=this.dropContainer,i=b(Oa,{optional:!0}),n=b(Fa);this._dragRef=n.createDrag(this.element,{dragStartThreshold:i&&i.dragStartThreshold!=null?i.dragStartThreshold:5,pointerDirectionChangeThreshold:i&&i.pointerDirectionChangeThreshold!=null?i.pointerDirectionChangeThreshold:5,zIndex:i?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),i&&this._assignDefaults(i),e&&(e.addItem(this),e._dropListRef.beforeStarted.pipe(ue(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){Ai(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let i=e.rootElementSelector,n=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let i=this._handles.getValue();i.push(e),this._handles.next(i)}_removeHandle(e){let i=this._handles.getValue(),n=i.indexOf(e);n>-1&&(i.splice(n,1),this._handles.next(i))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,i=e;this.rootElementSelector&&(i=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):Le(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let i=this._dir,n=this.dragStartDelay,r=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof n=="object"&&n?n:Wn(n),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(r).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe(Be(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){let n=this._dragDropRegistry.getDragDirectiveForNode(i);if(n){e.withParent(n._dragRef);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(e){let{lockAxis:i,dragStartDelay:n,constrainPosition:r,previewClass:a,boundaryElement:s,draggingDisabled:c,rootElementSelector:d,previewContainer:p}=e;this.disabled=c??!1,this.dragStartDelay=n||0,this.lockAxis=i||null,r&&(this.constrainPosition=r),a&&(this.previewClass=a),s&&(this.boundaryElement=s),d&&(this.rootElementSelector=d),p&&(this.previewContainer=p)}_setupHandlesListener(){this._handles.pipe(qe(e=>{let i=e.map(n=>n.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),We(e=>ki(...e.map(i=>i._stateChanges.pipe(gt(i))))),ue(this._destroyed)).subscribe(e=>{let i=this._dragRef,n=e.element.nativeElement;e.disabled?i.disableHandle(n):i.enableHandle(n)})}static \u0275fac=function(i){return new(i||o)};static \u0275dir=j({type:o,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,n){i&2&&Q("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",ee],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",ne]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Z([{provide:$i,useExisting:o}]),we]})}return o})();var Va=new be("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})});var jo=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=pe({type:o});static \u0275inj=he({providers:[ho,{provide:Va,useValue:{separatorKeyCodes:[13]}}],imports:[to,$e]})}return o})();var Wo=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=pe({type:o});static \u0275inj=he({})}return o})();var qo=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=pe({type:o});static \u0275inj=he({imports:[Wo,ao,$e]})}return o})();var si=class o{label="";hint="";prefix="";suffix="";type="text";classes="margin-bottom-medium";required=!1;disabled=!1;min=0;max=99999;step=1;sessionStorage=!1;valueChange=new F;_value=$("");set value(t){this._value.set(t),this.sessionStorage&&sessionStorage.setItem(this.sessionStorageKey(),String(t))}sessionStorageKey=()=>typeof this.sessionStorage=="string"?`${this.sessionStorage}-${this.label}`:this.label;get value(){return this._value()}setValue(t){t!==null&&(this._value.set(t),this.valueChange.emit(String(t)),this.sessionStorage&&sessionStorage.setItem(this.sessionStorageKey(),String(t)))}ngAfterViewInit(){if(this.sessionStorage){let t=sessionStorage.getItem(this.sessionStorageKey());t&&this.setValue(t)}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=B({type:o,selectors:[["app-input"]],inputs:{label:"label",hint:"hint",prefix:"prefix",suffix:"suffix",type:"type",classes:"classes",required:"required",disabled:"disabled",min:[2,"min","min",ne],max:[2,"max","max",ne],step:[2,"step","step",ne],sessionStorage:"sessionStorage",value:"value"},outputs:{valueChange:"valueChange"},decls:10,vars:14,consts:[["appearance","outline"],["matInput","",3,"ngModelChange","type","ngModel","required","disabled","min","max","step"],["matTextPrefix",""],["matTextSuffix",""]],template:function(e,i){e&1&&(f(0,"mat-form-field",0)(1,"mat-label"),k(2),y(),f(3,"input",1),M("ngModelChange",function(r){return i.setValue(r)}),y(),f(4,"mat-hint"),k(5),y(),f(6,"span",2),k(7),y(),f(8,"span",3),k(9),y()()),e&2&&(Fe(it("",i.classes," width-100")),_(2),Y(i.label),_(),S("type",i.type)("ngModel",i.value)("required",i.required)("disabled",i.disabled)("min",i.min)("max",i.max)("step",i.step),_(2),Y(i.hint),_(2),Y(i.prefix),_(2),Y(i.suffix))},dependencies:[Yt,lo,Wt,Qt,ii,ti,Zt,Xt,Jt,ei,Ge,ot,qt,_o,fo],encapsulation:2})};var Ha={generator:"planner_review",transformer:"commit",visualization:"table_chart_view",filter:"filter_alt",inference:"manufacturing",derived:"fiber_manual_record",merge:"merge"},st=class o{transform(t){return Ha[t]||t}static \u0275fac=function(e){return new(e||o)};static \u0275pipe=On({name:"icon",type:o,pure:!0})};function Ka(o,t){if(o&1){let e=J();f(0,"div",6)(1,"div",15),M("pointerdown",function(n){R(e);let r=w();return A(r.onInputPortClick(n))}),f(2,"mat-icon",16),k(3,"arrow_back_2"),y()()()}}function Ua(o,t){o&1&&W(0,"div",7)}function Ga(o,t){if(o&1){let e=J();f(0,"div",8)(1,"div",17),M("pointerdown",function(n){R(e);let r=w();return A(r.onInputPortClick(n,"input2"))}),f(2,"mat-icon",16),k(3,"arrow_back_2"),y()()()}}function $a(o,t){if(o&1){let e=J();f(0,"div",12)(1,"div",18),M("pointerdown",function(n){R(e);let r=w();return A(r.onOutputPortClick(n))}),f(2,"mat-icon",16),k(3,"play_arrow"),y()()()}}function ja(o,t){o&1&&W(0,"div",7)}function Wa(o,t){o&1&&W(0,"div",13)}function qa(o,t){o&1&&k(0,` INPUT-SELECT
`)}function Qa(o,t){if(o&1&&(f(0,"div",20)(1,"small")(2,"b"),k(3),y(),k(4),y()()),o&2){let e=w().$implicit,i=w(3);_(3),Oe("",e.label,": "),_(),Vn("",i.getValue(e.label)," ",e.suffix)}}function Ya(o,t){if(o&1&&z(0,qa,1,0)(1,Qa,5,3,"div",20),o&2){let e=t.$implicit;K(e.type==="select"?0:e.type=="input"?1:-1)}}function Za(o,t){if(o&1&&(f(0,"div",19),ge(1,Ya,2,1,null,null,vt),y()),o&2){let e=w(2);_(),fe(e.node.controls)}}function Xa(o,t){if(o&1&&z(0,Za,3,0,"div",19),o&2){let e=w();K(e.node.controls&&e.node.controls.length>0?0:-1)}}function Ja(o,t){if(o&1&&W(0,"app-select",22),o&2){let e=w().$implicit;S("label",e.label)("value",e.value)}}function es(o,t){if(o&1){let e=J();f(0,"app-input",24),M("valueChange",function(n){R(e);let r=w().$implicit,a=w(3);return A(a.setValue(r.label,n))}),y()}if(o&2){let e=w().$implicit,i=w(3);S("label",e.label)("value",e.value)("min",e.min)("max",e.max)("prefix",e.prefix??"")("suffix",e.suffix??"")("sessionStorage",i.id)}}function ts(o,t){if(o&1&&z(0,Ja,1,2,"app-select",22)(1,es,1,7,"app-input",23),o&2){let e=t.$implicit;K(e.type==="select"?0:e.type=="input"?1:-1)}}function is(o,t){if(o&1&&(f(0,"div",21),ge(1,ts,2,1,null,null,vt),y()),o&2){let e=w(2);_(),fe(e.node.controls)}}function ns(o,t){if(o&1&&z(0,is,3,0,"div",21),o&2){let e=w();K(e.node.controls&&e.node.controls.length>0?0:-1)}}function os(o,t){if(o&1){let e=J();f(0,"div",26),M("pointerdown",function(n){R(e);let r=w().$implicit,a=w(3);return A(a.onInputPortClick(n,r.label))}),f(1,"div",27)(2,"mat-icon",16),k(3,"arrow_left"),y(),f(4,"span")(5,"small"),k(6),y()()()()}if(o&2){let e=w().$implicit;q("data-port",e.label),_(6),Y(e.label)}}function rs(o,t){if(o&1&&z(0,os,7,2,"div",25),o&2){let e=t.$implicit;K(e.hide?-1:0)}}function as(o,t){if(o&1&&ge(0,rs,1,1,null,null,vt),o&2){let e=w(2);fe(e.node.params)}}function ss(o,t){if(o&1&&(f(0,"div",6),z(1,as,2,0),y()),o&2){let e=w();_(),K(e.hideArgs?-1:1)}}function ls(o,t){if(o&1){let e=J();f(0,"div",26),M("pointerdown",function(n){let r=R(e).$implicit,a=w(3);return A(a.onOutputPortClick(n,r))}),f(1,"div",28)(2,"span")(3,"small"),k(4),y()(),f(5,"mat-icon",16),k(6,"arrow_right"),y()()()}if(o&2){let e=t.$implicit;q("data-port",e),_(4),Y(e)}}function cs(o,t){if(o&1&&ge(0,ls,7,2,"div",25,vt),o&2){let e=w(2);fe(e.node.out)}}function ds(o,t){if(o&1&&(f(0,"div",12),z(1,cs,2,0),y()),o&2){let e=w();_(),K(e.hideArgs?-1:1)}}var hs={showDelay:300,hideDelay:100,touchendHideDelay:1e3},Qo=20,Yo=o=>Math.round(o/Qo)*Qo,li=class o{drag;id;x;y;node;hideArgs;selected;moved=new F;addEdge=new F;removeEdge=new F;replacePointer=new F;value=$({});input=Ue(()=>this.node.mode!=="generator");input2=Ue(()=>this.node.mode==="merger");output=Ue(()=>this.node.mode!=="consumer");ngOnInit(){let t=this.node.controls?.reduce((e,i)=>(e[i.label]=i.value,e),{});this.value.set(t)}setValue(t,e){let i=G({},this.value());i[t]=Number(e),this.value.set(i),this.node.controls?.forEach(n=>{n.label===t&&(n.value=i[t])})}getValue(t){return this.value()?.[t]}onDragMove(t){let e=t.source.getFreeDragPosition();this.moved.emit({id:this.id,x:e.x,y:e.y})}onDragStart(t){}onDragEnd(t){let e=t.source.getFreeDragPosition(),i=Yo(e.x),n=Yo(e.y);t.source.setFreeDragPosition({x:i,y:n}),this.moved.emit({id:this.id,x:i,y:n})}ngAfterViewInit(){this.drag.setFreeDragPosition({x:this.x,y:this.y})}onOutputPortClick(t,e="output"){this.addEdge.emit({from:`${this.id}.${e}`,to:"POINTER"})}onInputPortClick(t,e="input"){this.replacePointer.emit({id:`${this.id}.${e}`})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=B({type:o,selectors:[["app-node"]],viewQuery:function(e,i){if(e&1&&ce(Qi,7),e&2){let n;ae(n=se())&&(i.drag=n.first)}},inputs:{id:"id",x:"x",y:"y",node:"node",hideArgs:"hideArgs",selected:"selected"},outputs:{moved:"moved",addEdge:"addEdge",removeEdge:"removeEdge",replacePointer:"replacePointer"},features:[Z([{provide:vo,useValue:hs}])],decls:26,vars:19,consts:[["cdkDrag","","cdkDragBoundary",".nodes-layer",1,"node","padding-bottom-small",3,"cdkDragMoved","cdkDragEnded","cdkDragStarted"],["cdkDragHandle",""],[1,"text-content","padding-top-small","padding-x-medium","flex-row","items-center","justify-center",3,"matTooltip"],[1,"mat-font-title-md","justify-center","no-margin"],[1,"flex-row","justify-space-between","no-gap"],[1,"inputs"],[1,"input-ports","flex-column","gap-small"],[1,"ports-placeholder"],[1,"input-ports","flex-column","gap-small","margin-top-large"],[1,"text-content","justify-center"],[3,"innerHTML"],[1,"outputs"],[1,"output-ports","flex-column","items-right","content-bottom","gap-small"],[1,"margin-bottom-medium"],[1,"flex-row","justify-space-between"],["data-port","input",")","",1,"port",3,"pointerdown"],[1,"filled"],["data-port","input2",")","",1,"port",3,"pointerdown"],["data-port","output",")","",1,"port",3,"pointerdown"],[1,"attributes","grid-responsive-auto-50","gap-small","padding-x-medium","margin-top-medium","margin-bottom-small"],[1,"flex-row","items-center"],[1,"attributes","grid-responsive-auto-100","padding-x-medium","margin-top-small","no-margin-bottom"],["classes","no-margin-bottom",3,"label","value"],["type","number","classes","no-margin-bottom",3,"label","value","min","max","prefix","suffix","sessionStorage"],["type","number","classes","no-margin-bottom",3,"valueChange","label","value","min","max","prefix","suffix","sessionStorage"],[")","",1,"port"],[")","",1,"port",3,"pointerdown"],[1,"port-label","flex-row","items-left","no-gap"],[1,"port-label","flex-row","items-right","no-gap"]],template:function(e,i){e&1&&(f(0,"div",0),M("cdkDragMoved",function(r){return i.onDragMove(r)})("cdkDragEnded",function(r){return i.onDragEnd(r)})("cdkDragStarted",function(r){return i.onDragStart(r)}),f(1,"div",1)(2,"div",2)(3,"mat-icon"),k(4),Bt(5,"icon"),y(),f(6,"span",3),k(7),y()(),f(8,"div",4)(9,"div",5),z(10,Ka,4,0,"div",6)(11,Ua,1,0,"div",7),z(12,Ga,4,0,"div",8),y(),f(13,"div",9),W(14,"small",10),y(),f(15,"div",11),z(16,$a,4,0,"div",12)(17,ja,1,0,"div",7),y()(),z(18,Wa,1,0,"div",13),z(19,Xa,1,1)(20,ns,1,1),f(21,"div",14)(22,"div",5),z(23,ss,2,1,"div",6),y(),f(24,"div",11),z(25,ds,2,1,"div",12),y()()()()),e&2&&(Q("selected",i.selected)("generator",i.node.type==="generator"),_(2),S("matTooltip",i.node.tooltip),_(),Q("rotated-90",i.node.type==="merge"),_(),Y(Vt(5,17,i.node.type)),_(3),Oe(" ",i.node.name," "),_(3),K(i.input()?10:11),_(2),K(i.input2()?12:-1),_(2),S("innerHTML",i.node.description,Fn),_(2),K(i.output()?16:17),_(2),K(i.node.controls&&i.node.controls.length>0?18:-1),_(),K(i.hideArgs?19:20),_(4),K(i.input()?23:-1),_(2),K(i.output()?25:-1))},dependencies:[Qi,jo,qo,$o,jt,$t,ni,si,bo,yo,st],styles:['[_nghost-%COMP%]{--mat-form-field-container-height: 1em;--mat-form-field-container-vertical-padding: .25em;--mat-form-field-outlined-outline-width: 1px;--mat-form-field-outlined-container-shape: 1.25em;--mat-icon-color: var(--mat-sys-primary)}.node[_ngcontent-%COMP%]{position:absolute;width:250px;min-height:80px;background-color:var(--mat-sys-surface-variant);border:solid 3px var(--mat-sys-outline-variant);border-radius:var(--mat-sys-corner-medium);-webkit-user-select:none;user-select:none;z-index:1}.node[_ngcontent-%COMP%]:hover{cursor:move}.node[_ngcontent-%COMP%]:active{box-shadow:var(--mat-sys-level2)}.node.selected[_ngcontent-%COMP%]{box-shadow:var(--mat-sys-level2);background-color:var(--mat-sys-secondary-container)}.node.generator[_ngcontent-%COMP%]{border:solid 3px var(--mat-sys-inverse-primary);background-color:var(--mat-sys-secondary-container)}.node.generator.error[_ngcontent-%COMP%]{border:solid 3px var(--mat-sys-error);background-color:var(--mat-sys-error-container)}.cdk-drag-dragging[_ngcontent-%COMP%]{cursor:crosshair;opacity:.85}.text-content[_ngcontent-%COMP%]{color:var(--mat-sys-on-primary-container)}.text-content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{opacity:.7}.port[_ngcontent-%COMP%]:hover{cursor:crosshair}.output-ports[_ngcontent-%COMP%], .input-ports[_ngcontent-%COMP%]{background-color:transparent;position:relative;top:0}.input-ports[_ngcontent-%COMP%]{left:-16px}.output-ports[_ngcontent-%COMP%]{right:-16px}.ports-placeholder[_ngcontent-%COMP%]{width:24px}.inputs[_ngcontent-%COMP%]   .port-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 15px 0 12px;margin-left:-9px;border-radius:0 20px 20px 0}.outputs[_ngcontent-%COMP%]   .port-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 12px 0 15px;margin-right:-9px;border-radius:20px 0 0 20px}.port-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover, .port[_ngcontent-%COMP%]:hover   .port-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:var(--mat-sys-surface-bright)}.port[_ngcontent-%COMP%]:before{content:"";position:absolute}.float-help[_ngcontent-%COMP%]{position:absolute;right:.3rem;top:.3rem;opacity:.25;cursor:help;z-index:5}'],changeDetection:0})};var ps=["switch"],ms=["*"];function us(o,t){o&1&&(f(0,"span",11),Ae(),f(1,"svg",13),W(2,"path",14),y(),f(3,"svg",15),W(4,"path",16),y()())}var gs=new be("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1,disabledInteractive:!1})}),ci=class{source;checked;constructor(t,e){this.source=t,this.checked=e}},Yi=(()=>{class o{_elementRef=b(Te);_focusMonitor=b(qn);_changeDetectorRef=b(ke);defaults=b(gs);_onChange=e=>{};_onTouched=()=>{};_validatorOnChange=()=>{};_uniqueId;_checked=!1;_createChangeEvent(e){return new ci(this,e)}_labelId;get buttonId(){return`${this.id||this._uniqueId}-button`}_switchElement;focus(){this._switchElement.nativeElement.focus()}_noopAnimations=Zn();_focused;name=null;id;labelPosition="after";ariaLabel=null;ariaLabelledby=null;ariaDescribedby;required;color;disabled=!1;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked=e,this._changeDetectorRef.markForCheck()}hideIcon;disabledInteractive;change=new F;toggleChange=new F;get inputId(){return`${this.id||this._uniqueId}-input`}constructor(){b(Ut).load(Jn);let e=b(new zt("tabindex"),{optional:!0}),i=this.defaults;this.tabIndex=e==null?0:parseInt(e)||0,this.color=i.color||"accent",this.id=this._uniqueId=b(Qn).getId("mat-mdc-slide-toggle-"),this.hideIcon=i.hideIcon??!1,this.disabledInteractive=i.disabledInteractive??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e==="keyboard"||e==="program"?(this._focused=!0,this._changeDetectorRef.markForCheck()):e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(e){e.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorOnChange=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.disabled||(this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new ci(this,this.checked))))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=B({type:o,selectors:[["mat-slide-toggle"]],viewQuery:function(i,n){if(i&1&&ce(ps,5),i&2){let r;ae(r=se())&&(n._switchElement=r.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(i,n){i&2&&(Ye("id",n.id),q("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),Fe(n.color?"mat-"+n.color:""),Q("mat-mdc-slide-toggle-focused",n._focused)("mat-mdc-slide-toggle-checked",n.checked)("_mat-animation-noopable",n._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",ee],color:"color",disabled:[2,"disabled","disabled",ee],disableRipple:[2,"disableRipple","disableRipple",ee],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:ne(e)],checked:[2,"checked","checked",ee],hideIcon:[2,"hideIcon","hideIcon",ee],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ee]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[Z([{provide:so,useExisting:Mi(()=>o),multi:!0},{provide:co,useExisting:o,multi:!0}]),we],ngContentSelectors:ms,decls:14,vars:27,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mat-mdc-slide-toggle-touch-target"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,n){if(i&1){let r=J();He(),f(0,"div",1)(1,"button",2,0),M("click",function(){return R(r),A(n._handleClick())}),W(3,"div",3)(4,"span",4),f(5,"span",5)(6,"span",6)(7,"span",7),W(8,"span",8),y(),f(9,"span",9),W(10,"span",10),y(),z(11,us,5,0,"span",11),y()()(),f(12,"label",12),M("click",function(s){return R(r),A(s.stopPropagation())}),ze(13),y()()}if(i&2){let r=Ke(2);S("labelPosition",n.labelPosition),_(),Q("mdc-switch--selected",n.checked)("mdc-switch--unselected",!n.checked)("mdc-switch--checked",n.checked)("mdc-switch--disabled",n.disabled)("mat-mdc-slide-toggle-disabled-interactive",n.disabledInteractive),S("tabIndex",n.disabled&&!n.disabledInteractive?-1:n.tabIndex)("disabled",n.disabled&&!n.disabledInteractive),q("id",n.buttonId)("name",n.name)("aria-label",n.ariaLabel)("aria-labelledby",n._getAriaLabelledBy())("aria-describedby",n.ariaDescribedby)("aria-required",n.required||null)("aria-checked",n.checked)("aria-disabled",n.disabled&&n.disabledInteractive?"true":null),_(9),S("matRippleTrigger",r)("matRippleDisabled",n.disableRipple||n.disabled)("matRippleCentered",!0),_(),K(n.hideIcon?-1:11),_(),S("for",n.buttonId),q("id",n._labelId)}},dependencies:[Xn,Do],styles:[`.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mat-slide-toggle-track-width, 52px)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mat-slide-toggle-track-height, 32px);border-radius:var(--mat-slide-toggle-track-shape, var(--mat-sys-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mat-slide-toggle-disabled-track-opacity, 0.12)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-slide-toggle-track-outline-width, 2px);border-color:var(--mat-slide-toggle-track-outline-color, var(--mat-sys-outline))}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-slide-toggle-selected-track-outline-width, 2px);border-color:var(--mat-slide-toggle-selected-track-outline-color, transparent)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-slide-toggle-disabled-unselected-track-outline-width, 2px);border-color:var(--mat-slide-toggle-disabled-unselected-track-outline-color, var(--mat-sys-on-surface))}@media(forced-colors: active){.mdc-switch__track{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mat-slide-toggle-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-slide-toggle-hidden-track-opacity, 0);transition:var(--mat-slide-toggle-hidden-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-slide-toggle-visible-track-opacity, 1);transition:var(--mat-slide-toggle-visible-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mat-slide-toggle-unselected-hover-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mat-slide-toggle-unselected-focus-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mat-slide-toggle-unselected-pressed-track-color, var(--mat-sys-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mat-slide-toggle-disabled-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mat-slide-toggle-selected-track-color, var(--mat-sys-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-slide-toggle-visible-track-opacity, 1);transition:var(--mat-slide-toggle-visible-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-slide-toggle-hidden-track-opacity, 0);transition:var(--mat-slide-toggle-hidden-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mat-slide-toggle-selected-hover-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mat-slide-toggle-selected-focus-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mat-slide-toggle-selected-pressed-track-color, var(--mat-sys-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mat-slide-toggle-disabled-selected-track-color, var(--mat-sys-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mat-slide-toggle-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mat-slide-toggle-handle-width);height:var(--mat-slide-toggle-handle-height);border-radius:var(--mat-slide-toggle-handle-shape, var(--mat-sys-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-slide-toggle-unselected-handle-size, 16px);height:var(--mat-slide-toggle-unselected-handle-size, 16px);margin:var(--mat-slide-toggle-unselected-handle-horizontal-margin, 0 8px)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-slide-toggle-unselected-with-icon-handle-horizontal-margin, 0 4px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-slide-toggle-selected-handle-size, 24px);height:var(--mat-slide-toggle-selected-handle-size, 24px);margin:var(--mat-slide-toggle-selected-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-slide-toggle-selected-with-icon-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-slide-toggle-with-icon-handle-size, 24px);height:var(--mat-slide-toggle-with-icon-handle-size, 24px)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-slide-toggle-pressed-handle-size, 28px);height:var(--mat-slide-toggle-pressed-handle-size, 28px)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-slide-toggle-selected-pressed-handle-horizontal-margin, 0 22px)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-slide-toggle-unselected-pressed-handle-horizontal-margin, 0 2px)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-slide-toggle-disabled-selected-handle-opacity, 1)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-slide-toggle-disabled-unselected-handle-opacity, 0.38)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media(forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mat-slide-toggle-selected-handle-color, var(--mat-sys-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mat-slide-toggle-selected-hover-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mat-slide-toggle-selected-focus-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mat-slide-toggle-selected-pressed-handle-color, var(--mat-sys-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mat-slide-toggle-disabled-selected-handle-color, var(--mat-sys-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mat-slide-toggle-unselected-handle-color, var(--mat-sys-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mat-slide-toggle-unselected-hover-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mat-slide-toggle-unselected-focus-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mat-slide-toggle-unselected-pressed-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mat-slide-toggle-disabled-unselected-handle-color, var(--mat-sys-on-surface))}.mdc-switch__handle::before{background:var(--mat-slide-toggle-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mat-slide-toggle-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mat-slide-toggle-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mat-slide-toggle-state-layer-size, 40px);height:var(--mat-slide-toggle-state-layer-size, 40px)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mat-slide-toggle-unselected-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-slide-toggle-unselected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mat-slide-toggle-unselected-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-slide-toggle-unselected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mat-slide-toggle-unselected-pressed-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-slide-toggle-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mat-slide-toggle-selected-hover-state-layer-color, var(--mat-sys-primary));opacity:var(--mat-slide-toggle-selected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mat-slide-toggle-selected-focus-state-layer-color, var(--mat-sys-primary));opacity:var(--mat-slide-toggle-selected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mat-slide-toggle-selected-pressed-state-layer-color, var(--mat-sys-primary));opacity:var(--mat-slide-toggle-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1;transform:translateZ(0)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mat-slide-toggle-disabled-unselected-icon-opacity, 0.38)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mat-slide-toggle-disabled-selected-icon-opacity, 0.38)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mat-slide-toggle-unselected-icon-size, 16px);height:var(--mat-slide-toggle-unselected-icon-size, 16px);fill:var(--mat-slide-toggle-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mat-slide-toggle-disabled-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mat-slide-toggle-selected-icon-size, 16px);height:var(--mat-slide-toggle-selected-icon-size, 16px);fill:var(--mat-slide-toggle-selected-icon-color, var(--mat-sys-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mat-slide-toggle-disabled-selected-icon-color, var(--mat-sys-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-slide-toggle-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-slide-toggle-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-slide-toggle-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-slide-toggle-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-slide-toggle-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-slide-toggle-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mat-slide-toggle-disabled-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-slide-toggle-touch-target{position:absolute;top:50%;left:50%;height:var(--mat-slide-toggle-touch-target-size, 48px);width:100%;transform:translate(-50%, -50%);display:var(--mat-slide-toggle-touch-target-display, block)}[dir=rtl] .mat-mdc-slide-toggle-touch-target{left:auto;right:50%;transform:translate(50%, -50%)}
`],encapsulation:2,changeDetection:0})}return o})(),Zo=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=pe({type:o});static \u0275inj=he({imports:[Yi,$e]})}return o})();var di=class o{label="";checked=!1;labelPosition="after";disabled=!1;sessionStorage=!1;classes="margin-bottom-medium";valueChange=new F;_value=$("");set value(t){this._value.set(t)}get value(){return this._value()}setValue(t){t!==null&&(this._value.set(t),this.valueChange.emit(String(t)),this.sessionStorage&&sessionStorage.setItem(this.label,String(t)))}ngAfterViewInit(){if(this.sessionStorage){let t=sessionStorage.getItem(this.label);t&&this.setValue(t)}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=B({type:o,selectors:[["app-toggle"]],inputs:{label:"label",checked:"checked",labelPosition:"labelPosition",disabled:"disabled",sessionStorage:"sessionStorage",classes:"classes",value:"value"},outputs:{valueChange:"valueChange"},decls:2,vars:7,consts:[[3,"change","labelPosition","checked","disabled"]],template:function(e,i){e&1&&(f(0,"mat-slide-toggle",0),M("change",function(r){return i.setValue(r.checked)}),k(1),y()),e&2&&(Fe(it("",i.classes," width-100")),S("labelPosition",i.labelPosition)("checked",i.value)("disabled",i.disabled),_(),Oe(" ",i.label,`
`))},dependencies:[Ge,Zo,Yi],encapsulation:2})};var _s=["scrollArea"],vs=["*"],hi=class o{width="700px";height="700px";onResize=new F;scrollArea;dragging=!1;x=0;y=0;sl=0;st=0;onPanDown(t){let e=this.scrollArea.nativeElement;this.dragging=!0,this.x=t.clientX,this.y=t.clientY,this.sl=e.scrollLeft,this.st=e.scrollTop,t.target.setPointerCapture(t.pointerId)}onPanMove(t){if(!this.dragging)return;let e=this.scrollArea.nativeElement;e.scrollLeft=this.sl-(t.clientX-this.x),e.scrollTop=this.st-(t.clientY-this.y),this.onResize.emit({x:e.scrollLeft,y:e.scrollTop})}onPanUp(){this.dragging=!1}avoidPan(t){if(this.dragging=!1,t?.target instanceof HTMLElement&&t.pointerId!==void 0)try{t.target.releasePointerCapture(t.pointerId)}catch{}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=B({type:o,selectors:[["app-pan-scroll"]],viewQuery:function(e,i){if(e&1&&ce(_s,7),e&2){let n;ae(n=se())&&(i.scrollArea=n.first)}},inputs:{width:"width",height:"height"},outputs:{onResize:"onResize"},ngContentSelectors:vs,decls:3,vars:4,consts:[["scrollArea",""],[1,"scroll-visible","animate-height",3,"pointerdown","pointermove","pointerup","pointercancel","lostpointercapture"]],template:function(e,i){if(e&1){let n=J();He(),Ft(0,"div",1,0),Ln("pointerdown",function(a){return R(n),A(i.onPanDown(a))})("pointermove",function(a){return R(n),A(i.onPanMove(a))})("pointerup",function(a){return R(n),A(i.avoidPan(a))})("pointercancel",function(a){return R(n),A(i.avoidPan(a))})("lostpointercapture",function(a){return R(n),A(i.avoidPan(a))}),ze(2),Ot()}e&2&&Se("width",i.width)("height",i.height)},encapsulation:2})};var ys=["plotKernel"];var pi=class o{dataSource;layoutChange=new F;plotElement;plotlyData=$([]);layout;stopEffect=null;data={};_dataEnhanced;get dataEnhanced(){return this._dataEnhanced}set dataEnhanced(t){this._dataEnhanced=t}plotId=`plot-${Math.random().toString(36).substring(2,9)}`;constructor(){this.layout=structuredClone(this.defaultLayout()),this.stopEffect=Rt(()=>{let t=this.dataSource;t&&(this.updateData(t),this.updatePlot())})}ngOnDestroy(){this.stopEffect?.destroy()}defaultLayout(){return{margin:{t:20,b:40,l:90,r:10},autosize:!0,plot_bgcolor:"#FFFBFF",paper_bgcolor:"#FFFBFF",font:{color:"#2f2f2f"},showlegend:!1}}get config(){return{displaylogo:!1,displayModeBar:!1,responsive:!0,modeBarButtonsToRemove:["toImage","lasso2d","select2d","autoScale2d"],modeBarButtonsToAdd:["toggleSpikelines","hovercompare","hoverclosest"]}}updatePlot(){let t=this.plotlyData();if(t.length===this.dataEnhanced.length){for(let e=0;e<this.dataEnhanced.length;e++)Object.assign(t[e],this.dataEnhanced[e]);this.plotlyData.set(t)}else this.plotlyData.set(this.dataEnhanced)}ngAfterViewInit(){let t=this.plotElement;t.plotlyClick&&t.plotlyClick.subscribe(e=>{this.plotlyClick(e)}),t.relayout&&t.relayout.subscribe(e=>{this.plotlyRelayout(e)}),t.doubleClick&&t.doubleClick.subscribe(e=>{this.plotlyDoubleClick(e)})}plotlyClick(t){}plotlyDoubleClick(t){}plotlyRelayout(t){this.layoutChange.emit(t)}areDifferent(t,e){if(t.length!==e.length)return!0;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!0;return!1}range(t,e,i=1){if(e===void 0&&(e=t,t=0),i===0)throw new Error("range() step argument must not be zero");let n=[];if(i>0)for(let r=t;r<e;r+=i)n.push(r);else for(let r=t;r>e;r+=i)n.push(r);return n}linspace(t,e,i){if(i<=0)throw new Error("linspace() num must be > 0");if(i===1)return[t];let n=(e-t)/(i-1),r=new Array(i);for(let a=0;a<i;a++)r[a]=t+n*a;return r}timeAxis(t,e){let i=1/e,n=new Array(t);for(let r=0;r<t;r++)n[r]=r*i;return n}reverseArray(t){let e=new Array(t.length);for(let i=0;i<t.length;i++)e[i]=t[t.length-1-i];return e}downsample=(t,e)=>{if(e<=0)throw new Error("n must be > 0");let i=[];for(let n=0;n<t.length;n+=e)i.push(t[n]);return i};subsample(t,e){let i=t.length;if(i<=e)return Array.from(t);let n=Math.ceil(i/e),r=[];for(let a=0;a<i;a+=n)r.push(t[a]);return r}static \u0275fac=function(e){return new(e||o)};static \u0275dir=j({type:o,viewQuery:function(e,i){if(e&1&&ce(ys,7),e&2){let n;ae(n=se())&&(i.plotElement=n.first)}},inputs:{dataSource:"dataSource"},outputs:{layoutChange:"layoutChange"}})};var bs=()=>({width:"100%",height:"100%"}),mi=class o extends pi{MAX_POINTS=500;buffer=15;samples=0;lastNames=[];lastSampleRate=1;lastSamples=0;lastGain=1;lastSpacing=0;data={};data_extra=[];layout=Re(G({},structuredClone(this.defaultLayout())),{margin:{t:20,b:70,l:100,r:30},xaxis:{title:{text:"Samples"}},yaxis:{title:{text:"Amplitude"}}});updateData(t){let e=!1,i=!1,n=0,r=t.extras?.tickText??[];this.areDifferent(r,this.lastNames)&&(this.data={},e=!0),this.lastNames=[...r];let a=t.extras?.sampleRate??1;(a!==this.lastSampleRate||this.samples!==this.lastSamples&&a>1)&&(i=!0),this.lastSampleRate=a,this.lastSamples=this.samples;let s=t.extras?.spacing,c=t.extras?.gain,d=t.extras?.xlabel,p=t.extras?.ylabel;a===1&&(this.layout=Re(G({},this.layout),{xaxis:{title:{text:"Samples"}}})),r.length===0&&(this.layout=Re(G({},this.layout),{yaxis:{title:{text:"Amplitude"}}})),(this.lastGain!==c||this.lastSpacing!=s)&&(e=!0),this.lastSpacing=s,this.lastGain=c;let v=0,u=[];for(let x of t.output??[]){let V=r[v]??`ch${v+1}`,C=this.subsample(x,this.MAX_POINTS);this.data[V]={type:"scatter",mode:"lines",name:V,y:C},u.push(v*s),v++,this.samples=C.length,n=x.length}if(this.lastGain=c,e&&(this.layout=Re(G({},this.layout),{yaxis:{title:{text:p},tickmode:"array",tickvals:u,ticktext:r,zeroline:!1}})),i){let x=this.samples,V=n/x,C=a/V,T=1,E=Math.floor((x-1)/C)+2;if(E>100)this.layout.xaxis={};else{let m=Array.from({length:E},(Ie,Ce)=>Ce*C),oe=m.map(Ie=>"-"+(Ie*V/a).toFixed(1)+"s");oe.reverse(),this.layout=Re(G({},this.layout),{xaxis:{title:{text:d},tickmode:"array",tickvals:m,ticktext:oe,range:[0,x-0]}})}}}get dataEnhanced(){return[...Object.values(this.data),...this.data_extra]}constructor(){super()}ngOnChanges(){this.dataSource&&(this.updateData(this.dataSource),this.updatePlot())}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=B({type:o,selectors:[["app-plot"]],features:[xe,we],decls:2,vars:8,consts:[["plot",""],[3,"id","data","layout","config","useResizeHandler"]],template:function(e,i){e&1&&W(0,"plotly-plot",1,0),e&2&&(Bn(Hn(7,bs)),S("id",i.plotId)("data",i.plotlyData())("layout",i.layout)("config",i.config)("useResizeHandler",!0))},dependencies:[Gn,Un],encapsulation:2})};var Zi={};kn(Zi,{TsAffine:()=>ws,TsBufferTime:()=>ba,TsMeanMoving:()=>xs,TsNoise:()=>Cs,TsNoiseGenerator:()=>wa,TsPlot:()=>xa,TsStack:()=>Ds,TsSubtract:()=>Es,TsSum:()=>Ca});var ws={name:"Affine",description:"Applies an affine transformation to each sample: y = m\xB7x + b.",tooltip:"Linear scaling with offset. Multiplies each sample by m and then adds b (y = m\xB7x + b).",kernel:"ts.affine",controls:[{type:"input",label:"m",value:1,min:-100,max:100},{type:"input",label:"b",value:0,min:-100,max:100}],mode:"transformer",type:"transformer",classification:{domain:"Process",group:"Linear"}};var xs={name:"Moving Mean",description:"Causal moving average (SMA) per channel. Output length equals input length. Uses warm-up with partial window.",tooltip:"Maintains W-1 samples of history per channel to avoid chunk-boundary artifacts. No lookahead.",kernel:"ts.mean_moving",mode:"transformer",type:"transformer",controls:[{type:"input",label:"window",value:128,min:1,max:8192}],params:[],classification:{domain:"Window",group:"Stats"}};var Cs={name:"Noise",description:"Generates noise on each noise-generator tick.",kernel:"ts.noiseDerived",out:[],controls:[{type:"input",label:"channels",value:1,min:0,max:100},{type:"input",label:"blockSize",value:1,min:0,max:100}],mode:"generator",type:"derived",classification:{domain:"Source",group:"Derived"}};var Ds={name:"Channel Stack",description:"",kernel:"ts.stack",controls:[{type:"input",label:"gain",value:1,min:-100,max:100},{type:"input",label:"spacing",value:1,min:-100,max:100}],mode:"transformer",type:"transformer",classification:{domain:"Process",group:"ChannelOps"}};var Es={name:"Subtract",description:"Subtract all input channels sample-wise into a single output channel.",tooltip:"All channels must be time-aligned and have equal length.",kernel:"ts.subtract",mode:"merger",type:"merge",classification:{domain:"Process",group:"Transformer"}};function Ts(o){let t=new Map;for(let e of o){let i=e.classification;if(!i)continue;let{domain:n,group:r}=i;t.has(n)||t.set(n,new Map);let a=t.get(n),s=r??"__ungrouped__";a.has(s)||a.set(s,{name:r??e.name,children:[]}),a.get(s).children.push({name:e.name,kernel:e})}return Array.from(t.entries()).map(([e,i])=>({name:e,children:Array.from(i.values())}))}var Xi=Ts(Object.values(Zi).filter(o=>typeof o=="object"&&o!==null&&"kernel"in o&&"classification"in o));console.log(Xi);var en=new be("CDK_TREE_NODE_OUTLET_NODE"),ui=(()=>{class o{viewContainer=b(tt);_node=b(en,{optional:!0});constructor(){}static \u0275fac=function(i){return new(i||o)};static \u0275dir=j({type:o,selectors:[["","cdkTreeNodeOutlet",""]]})}return o})(),Ji=class{$implicit;level;index;count;constructor(t){this.$implicit=t}},gi=(()=>{class o{template=b(Ni);when;constructor(){}static \u0275fac=function(i){return new(i||o)};static \u0275dir=j({type:o,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:[0,"cdkTreeNodeDefWhen","when"]}})}return o})();function Xo(){return Error("Could not find a tree control, levelAccessor, or childrenAccessor for the tree.")}var lt=(()=>{class o{_differs=b(zn);_changeDetectorRef=b(ke);_elementRef=b(Te);_dir=b(nt);_onDestroy=new O;_dataDiffer;_defaultNodeDef;_dataSubscription;_levels=new Map;_parents=new Map;_ariaSets=new Map;get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}_dataSource;treeControl;levelAccessor;childrenAccessor;trackBy;expansionKey;_nodeOutlet;_nodeDefs;viewChange=new Ee({start:0,end:Number.MAX_VALUE});_expansionModel;_flattenedNodes=new Ee([]);_nodeType=new Ee(null);_nodes=new Ee(new Map);_keyManagerNodes=new Ee([]);_keyManagerFactory=b(Yn);_keyManager;_viewInit=!1;constructor(){}ngAfterContentInit(){this._initializeKeyManager()}ngAfterContentChecked(){this._updateDefaultNodeDefinition(),this._subscribeToDataChanges()}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this._nodes.complete(),this._keyManagerNodes.complete(),this._nodeType.complete(),this._flattenedNodes.complete(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),this._keyManager?.destroy()}ngOnInit(){this._checkTreeControlUsage(),this._initializeDataDiffer()}ngAfterViewInit(){this._viewInit=!0}_updateDefaultNodeDefinition(){let e=this._nodeDefs.filter(i=>!i.when);e.length>1,this._defaultNodeDef=e[0]}_setNodeTypeIfUnset(e){this._nodeType.value===null&&this._nodeType.next(e)}_switchDataSource(e){this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._subscribeToDataChanges()}_getExpansionModel(){return this.treeControl?this.treeControl.expansionModel:(this._expansionModel??=new po(!0),this._expansionModel)}_subscribeToDataChanges(){if(this._dataSubscription)return;let e;oo(this._dataSource)?e=this._dataSource.connect(this):Mn(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=X(this._dataSource)),e&&(this._dataSubscription=this._getRenderData(e).pipe(ue(this._onDestroy)).subscribe(i=>{this._renderDataChanges(i)}))}_getRenderData(e){let i=this._getExpansionModel();return ut([e,this._nodeType,i.changed.pipe(gt(null),qe(n=>{this._emitExpansionChanges(n)}))]).pipe(We(([n,r])=>r===null?X({renderNodes:n,flattenedNodes:null,nodeType:r}):this._computeRenderingData(n,r).pipe(me(a=>Re(G({},a),{nodeType:r})))))}_renderDataChanges(e){if(e.nodeType===null){this.renderNodeChanges(e.renderNodes);return}this._updateCachedData(e.flattenedNodes),this.renderNodeChanges(e.renderNodes),this._updateKeyManagerItems(e.flattenedNodes)}_emitExpansionChanges(e){if(!e)return;let i=this._nodes.value;for(let n of e.added)i.get(n)?._emitExpansionState(!0);for(let n of e.removed)i.get(n)?._emitExpansionState(!1)}_initializeKeyManager(){let e=ut([this._keyManagerNodes,this._nodes]).pipe(me(([n,r])=>n.reduce((a,s)=>{let c=r.get(this._getExpansionKey(s));return c&&a.push(c),a},[]))),i={trackBy:n=>this._getExpansionKey(n.data),skipPredicate:n=>!!n.isDisabled,typeAheadDebounceInterval:!0,horizontalOrientation:this._dir.value};this._keyManager=this._keyManagerFactory(e,i)}_initializeDataDiffer(){let e=this.trackBy??((i,n)=>this._getExpansionKey(n));this._dataDiffer=this._differs.find([]).create(e)}_checkTreeControlUsage(){}renderNodeChanges(e,i=this._dataDiffer,n=this._nodeOutlet.viewContainer,r){let a=i.diff(e);!a&&!this._viewInit||(a?.forEachOperation((s,c,d)=>{if(s.previousIndex==null)this.insertNode(e[d],d,n,r);else if(d==null)n.remove(c);else{let p=n.get(c);n.move(p,d)}}),a?.forEachIdentityChange(s=>{let c=s.item;if(s.currentIndex!=null){let d=n.get(s.currentIndex);d.context.$implicit=c}}),r?this._changeDetectorRef.markForCheck():this._changeDetectorRef.detectChanges())}_getNodeDef(e,i){if(this._nodeDefs.length===1)return this._nodeDefs.first;let n=this._nodeDefs.find(r=>r.when&&r.when(i,e))||this._defaultNodeDef;return n}insertNode(e,i,n,r){let a=this._getLevelAccessor(),s=this._getNodeDef(e,i),c=this._getExpansionKey(e),d=new Ji(e);d.index=i,r??=this._parents.get(c)??void 0,a?d.level=a(e):r!==void 0&&this._levels.has(this._getExpansionKey(r))?d.level=this._levels.get(this._getExpansionKey(r))+1:d.level=0,this._levels.set(c,d.level),(n||this._nodeOutlet.viewContainer).createEmbeddedView(s.template,d,i),Ze.mostRecentTreeNode&&(Ze.mostRecentTreeNode.data=e)}isExpanded(e){return!!(this.treeControl?.isExpanded(e)||this._expansionModel?.isSelected(this._getExpansionKey(e)))}toggle(e){this.treeControl?this.treeControl.toggle(e):this._expansionModel&&this._expansionModel.toggle(this._getExpansionKey(e))}expand(e){this.treeControl?this.treeControl.expand(e):this._expansionModel&&this._expansionModel.select(this._getExpansionKey(e))}collapse(e){this.treeControl?this.treeControl.collapse(e):this._expansionModel&&this._expansionModel.deselect(this._getExpansionKey(e))}toggleDescendants(e){this.treeControl?this.treeControl.toggleDescendants(e):this._expansionModel&&(this.isExpanded(e)?this.collapseDescendants(e):this.expandDescendants(e))}expandDescendants(e){if(this.treeControl)this.treeControl.expandDescendants(e);else if(this._expansionModel){let i=this._expansionModel;i.select(this._getExpansionKey(e)),this._getDescendants(e).pipe(Be(1),ue(this._onDestroy)).subscribe(n=>{i.select(...n.map(r=>this._getExpansionKey(r)))})}}collapseDescendants(e){if(this.treeControl)this.treeControl.collapseDescendants(e);else if(this._expansionModel){let i=this._expansionModel;i.deselect(this._getExpansionKey(e)),this._getDescendants(e).pipe(Be(1),ue(this._onDestroy)).subscribe(n=>{i.deselect(...n.map(r=>this._getExpansionKey(r)))})}}expandAll(){this.treeControl?this.treeControl.expandAll():this._expansionModel&&this._forEachExpansionKey(e=>this._expansionModel?.select(...e))}collapseAll(){this.treeControl?this.treeControl.collapseAll():this._expansionModel&&this._forEachExpansionKey(e=>this._expansionModel?.deselect(...e))}_getLevelAccessor(){return this.treeControl?.getLevel?.bind(this.treeControl)??this.levelAccessor}_getChildrenAccessor(){return this.treeControl?.getChildren?.bind(this.treeControl)??this.childrenAccessor}_getDirectChildren(e){let i=this._getLevelAccessor(),n=this._expansionModel??this.treeControl?.expansionModel;if(!n)return X([]);let r=this._getExpansionKey(e),a=n.changed.pipe(We(c=>c.added.includes(r)?X(!0):c.removed.includes(r)?X(!1):Pn),gt(this.isExpanded(e)));if(i)return ut([a,this._flattenedNodes]).pipe(me(([c,d])=>c?this._findChildrenByLevel(i,d,e,1):[]));let s=this._getChildrenAccessor();if(s)return Gt(s(e)??[]);throw Xo()}_findChildrenByLevel(e,i,n,r){let a=this._getExpansionKey(n),s=i.findIndex(v=>this._getExpansionKey(v)===a),c=e(n),d=c+r,p=[];for(let v=s+1;v<i.length;v++){let u=e(i[v]);if(u<=c)break;u<=d&&p.push(i[v])}return p}_registerNode(e){this._nodes.value.set(this._getExpansionKey(e.data),e),this._nodes.next(this._nodes.value)}_unregisterNode(e){this._nodes.value.delete(this._getExpansionKey(e.data)),this._nodes.next(this._nodes.value)}_getLevel(e){return this._levels.get(this._getExpansionKey(e))}_getSetSize(e){return this._getAriaSet(e).length}_getPositionInSet(e){let i=this._getAriaSet(e),n=this._getExpansionKey(e);return i.findIndex(r=>this._getExpansionKey(r)===n)+1}_getNodeParent(e){let i=this._parents.get(this._getExpansionKey(e.data));return i&&this._nodes.value.get(this._getExpansionKey(i))}_getNodeChildren(e){return this._getDirectChildren(e.data).pipe(me(i=>i.reduce((n,r)=>{let a=this._nodes.value.get(this._getExpansionKey(r));return a&&n.push(a),n},[])))}_sendKeydownToKeyManager(e){if(e.target===this._elementRef.nativeElement)this._keyManager.onKeydown(e);else{let i=this._nodes.getValue();for(let[,n]of i)if(e.target===n._elementRef.nativeElement){this._keyManager.onKeydown(e);break}}}_getDescendants(e){if(this.treeControl)return X(this.treeControl.getDescendants(e));if(this.levelAccessor){let i=this._findChildrenByLevel(this.levelAccessor,this._flattenedNodes.value,e,1/0);return X(i)}if(this.childrenAccessor)return this._getAllChildrenRecursively(e).pipe(Ii((i,n)=>(i.push(...n),i),[]));throw Xo()}_getAllChildrenRecursively(e){return this.childrenAccessor?Gt(this.childrenAccessor(e)).pipe(Be(1),We(i=>{for(let n of i)this._parents.set(this._getExpansionKey(n),e);return X(...i).pipe(Pi(n=>Si(X([n]),this._getAllChildrenRecursively(n))))})):X([])}_getExpansionKey(e){return this.expansionKey?.(e)??e}_getAriaSet(e){let i=this._getExpansionKey(e),n=this._parents.get(i),r=n?this._getExpansionKey(n):null;return this._ariaSets.get(r)??[e]}_findParentForNode(e,i,n){if(!n.length)return null;let r=this._levels.get(this._getExpansionKey(e))??0;for(let a=i-1;a>=0;a--){let s=n[a];if((this._levels.get(this._getExpansionKey(s))??0)<r)return s}return null}_flattenNestedNodesWithExpansion(e,i=0){let n=this._getChildrenAccessor();return n?X(...e).pipe(Pi(r=>{let a=this._getExpansionKey(r);this._parents.has(a)||this._parents.set(a,null),this._levels.set(a,i);let s=Gt(n(r));return Si(X([r]),s.pipe(Be(1),qe(c=>{this._ariaSets.set(a,[...c??[]]);for(let d of c??[]){let p=this._getExpansionKey(d);this._parents.set(p,r),this._levels.set(p,i+1)}}),We(c=>c?this._flattenNestedNodesWithExpansion(c,i+1).pipe(me(d=>this.isExpanded(r)?d:[])):X([]))))}),Ii((r,a)=>(r.push(...a),r),[])):X([...e])}_computeRenderingData(e,i){if(this.childrenAccessor&&i==="flat")return this._clearPreviousCache(),this._ariaSets.set(null,[...e]),this._flattenNestedNodesWithExpansion(e).pipe(me(n=>({renderNodes:n,flattenedNodes:n})));if(this.levelAccessor&&i==="nested"){let n=this.levelAccessor;return X(e.filter(r=>n(r)===0)).pipe(me(r=>({renderNodes:r,flattenedNodes:e})),qe(({flattenedNodes:r})=>{this._calculateParents(r)}))}else return i==="flat"?X({renderNodes:e,flattenedNodes:e}).pipe(qe(({flattenedNodes:n})=>{this._calculateParents(n)})):(this._clearPreviousCache(),this._ariaSets.set(null,[...e]),this._flattenNestedNodesWithExpansion(e).pipe(me(n=>({renderNodes:e,flattenedNodes:n}))))}_updateCachedData(e){this._flattenedNodes.next(e)}_updateKeyManagerItems(e){this._keyManagerNodes.next(e)}_calculateParents(e){let i=this._getLevelAccessor();if(i){this._clearPreviousCache();for(let n=0;n<e.length;n++){let r=e[n],a=this._getExpansionKey(r);this._levels.set(a,i(r));let s=this._findParentForNode(r,n,e);this._parents.set(a,s);let c=s?this._getExpansionKey(s):null,d=this._ariaSets.get(c)??[];d.splice(n,0,r),this._ariaSets.set(c,d)}}}_forEachExpansionKey(e){let i=[],n=[];this._nodes.value.forEach(r=>{i.push(this._getExpansionKey(r.data)),n.push(this._getDescendants(r.data))}),n.length>0?ut(n).pipe(Be(1),ue(this._onDestroy)).subscribe(r=>{r.forEach(a=>a.forEach(s=>i.push(this._getExpansionKey(s)))),e(i)}):e(i)}_clearPreviousCache(){this._parents.clear(),this._levels.clear(),this._ariaSets.clear()}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=B({type:o,selectors:[["cdk-tree"]],contentQueries:function(i,n,r){if(i&1&&Lt(r,gi,5),i&2){let a;ae(a=se())&&(n._nodeDefs=a)}},viewQuery:function(i,n){if(i&1&&ce(ui,7),i&2){let r;ae(r=se())&&(n._nodeOutlet=r.first)}},hostAttrs:["role","tree",1,"cdk-tree"],hostBindings:function(i,n){i&1&&M("keydown",function(a){return n._sendKeydownToKeyManager(a)})},inputs:{dataSource:"dataSource",treeControl:"treeControl",levelAccessor:"levelAccessor",childrenAccessor:"childrenAccessor",trackBy:"trackBy",expansionKey:"expansionKey"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(i,n){i&1&&Ne(0,0)},dependencies:[ui],encapsulation:2})}return o})(),Ze=(()=>{class o{_elementRef=b(Te);_tree=b(lt);_tabindex=-1;_type="flat";get role(){return"treeitem"}set role(e){}get isExpandable(){return this._isExpandable()}set isExpandable(e){this._inputIsExpandable=e,!(this.data&&!this._isExpandable||!this._inputIsExpandable)&&(this._inputIsExpanded?this.expand():this._inputIsExpanded===!1&&this.collapse())}get isExpanded(){return this._tree.isExpanded(this._data)}set isExpanded(e){this._inputIsExpanded=e,e?this.expand():this.collapse()}isDisabled;typeaheadLabel;getLabel(){return this.typeaheadLabel||this._elementRef.nativeElement.textContent?.trim()||""}activation=new F;expandedChange=new F;static mostRecentTreeNode=null;_destroyed=new O;_dataChanges=new O;_inputIsExpandable=!1;_inputIsExpanded=void 0;_shouldFocus=!0;_parentNodeAriaLevel;get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._dataChanges.next())}_data;get isLeafNode(){return this._tree.treeControl?.isExpandable!==void 0&&!this._tree.treeControl.isExpandable(this._data)?!0:this._tree.treeControl?.isExpandable===void 0&&this._tree.treeControl?.getDescendants(this._data).length===0}get level(){return this._tree._getLevel(this._data)??this._parentNodeAriaLevel}_isExpandable(){return this._tree.treeControl?!this.isLeafNode:this._inputIsExpandable}_getAriaExpanded(){return this._isExpandable()?String(this.isExpanded):null}_getSetSize(){return this._tree._getSetSize(this._data)}_getPositionInSet(){return this._tree._getPositionInSet(this._data)}_changeDetectorRef=b(ke);constructor(){o.mostRecentTreeNode=this}ngOnInit(){this._parentNodeAriaLevel=Ss(this._elementRef.nativeElement),this._tree._getExpansionModel().changed.pipe(me(()=>this.isExpanded),An(),ue(this._destroyed)).pipe(ue(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._tree._setNodeTypeIfUnset(this._type),this._tree._registerNode(this)}ngOnDestroy(){o.mostRecentTreeNode===this&&(o.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}getParent(){return this._tree._getNodeParent(this)??null}getChildren(){return this._tree._getNodeChildren(this)}focus(){this._tabindex=0,this._shouldFocus&&this._elementRef.nativeElement.focus(),this._changeDetectorRef.markForCheck()}unfocus(){this._tabindex=-1,this._changeDetectorRef.markForCheck()}activate(){this.isDisabled||this.activation.next(this._data)}collapse(){this.isExpandable&&this._tree.collapse(this._data)}expand(){this.isExpandable&&this._tree.expand(this._data)}makeFocusable(){this._tabindex=0,this._changeDetectorRef.markForCheck()}_focusItem(){this.isDisabled||this._tree._keyManager.focusItem(this)}_setActiveItem(){this.isDisabled||(this._shouldFocus=!1,this._tree._keyManager.focusItem(this),this._shouldFocus=!0)}_emitExpansionState(e){this.expandedChange.emit(e)}static \u0275fac=function(i){return new(i||o)};static \u0275dir=j({type:o,selectors:[["cdk-tree-node"]],hostAttrs:["role","treeitem",1,"cdk-tree-node"],hostVars:5,hostBindings:function(i,n){i&1&&M("click",function(){return n._setActiveItem()})("focus",function(){return n._focusItem()}),i&2&&(Ye("tabIndex",n._tabindex),q("aria-expanded",n._getAriaExpanded())("aria-level",n.level+1)("aria-posinset",n._getPositionInSet())("aria-setsize",n._getSetSize()))},inputs:{role:"role",isExpandable:[2,"isExpandable","isExpandable",ee],isExpanded:"isExpanded",isDisabled:[2,"isDisabled","isDisabled",ee],typeaheadLabel:[0,"cdkTreeNodeTypeaheadLabel","typeaheadLabel"]},outputs:{activation:"activation",expandedChange:"expandedChange"},exportAs:["cdkTreeNode"]})}return o})();function Ss(o){let t=o.parentElement;for(;t&&!ks(t);)t=t.parentElement;return t?t.classList.contains("cdk-nested-tree-node")?ne(t.getAttribute("aria-level")):0:-1}function ks(o){let t=o.classList;return!!(t?.contains("cdk-nested-tree-node")||t?.contains("cdk-tree"))}var Is=/([A-Za-z%]+)$/,tn=(()=>{class o{_treeNode=b(Ze);_tree=b(lt);_element=b(Te);_dir=b(nt,{optional:!0});_currentPadding;_destroyed=new O;indentUnits="px";get level(){return this._level}set level(e){this._setLevelInput(e)}_level;get indent(){return this._indent}set indent(e){this._setIndentInput(e)}_indent=40;constructor(){this._setPadding(),this._dir?.change.pipe(ue(this._destroyed)).subscribe(()=>this._setPadding(!0)),this._treeNode._dataChanges.subscribe(()=>this._setPadding())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){let e=(this._treeNode.data&&this._tree._getLevel(this._treeNode.data))??null,i=this._level==null?e:this._level;return typeof i=="number"?`${i*this._indent}${this.indentUnits}`:null}_setPadding(e=!1){let i=this._paddingIndent();if(i!==this._currentPadding||e){let n=this._element.nativeElement,r=this._dir&&this._dir.value==="rtl"?"paddingRight":"paddingLeft",a=r==="paddingLeft"?"paddingRight":"paddingLeft";n.style[r]=i||"",n.style[a]="",this._currentPadding=i}}_setLevelInput(e){this._level=isNaN(e)?null:e,this._setPadding()}_setIndentInput(e){let i=e,n="px";if(typeof e=="string"){let r=e.split(Is);i=r[0],n=r[1]||n}this.indentUnits=n,this._indent=ne(i),this._setPadding()}static \u0275fac=function(i){return new(i||o)};static \u0275dir=j({type:o,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:[2,"cdkTreeNodePadding","level",ne],indent:[0,"cdkTreeNodePaddingIndent","indent"]}})}return o})(),nn=(()=>{class o{_tree=b(lt);_treeNode=b(Ze);recursive=!1;constructor(){}_toggle(){this.recursive?this._tree.toggleDescendants(this._treeNode.data):this._tree.toggle(this._treeNode.data),this._tree._keyManager.focusItem(this._treeNode)}static \u0275fac=function(i){return new(i||o)};static \u0275dir=j({type:o,selectors:[["","cdkTreeNodeToggle",""]],hostAttrs:["tabindex","-1"],hostBindings:function(i,n){i&1&&M("click",function(a){return n._toggle(),a.stopPropagation()})("keydown.Enter",function(a){return n._toggle(),a.preventDefault()})("keydown.Space",function(a){return n._toggle(),a.preventDefault()})},inputs:{recursive:[2,"cdkTreeNodeToggleRecursive","recursive",ee]}})}return o})();var Jo=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=pe({type:o});static \u0275inj=he({})}return o})();function Ps(o){return!!o._isNoopTreeKeyManager}var tr=(()=>{class o extends Ze{get tabIndexInputBinding(){return this._tabIndexInputBinding}set tabIndexInputBinding(e){this._tabIndexInputBinding=e}_tabIndexInputBinding;defaultTabIndex=0;_getTabindexAttribute(){return Ps(this._tree._keyManager)?this.tabIndexInputBinding:this._tabindex}get disabled(){return this.isDisabled}set disabled(e){this.isDisabled=e}constructor(){super();let e=b(new zt("tabindex"),{optional:!0});this.tabIndexInputBinding=Number(e)||this.defaultTabIndex}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}static \u0275fac=function(i){return new(i||o)};static \u0275dir=j({type:o,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],hostVars:5,hostBindings:function(i,n){i&1&&M("click",function(){return n._focusItem()}),i&2&&(Ye("tabIndex",n._getTabindexAttribute()),q("aria-expanded",n._getAriaExpanded())("aria-level",n.level+1)("aria-posinset",n._getPositionInSet())("aria-setsize",n._getSetSize()))},inputs:{tabIndexInputBinding:[2,"tabIndex","tabIndexInputBinding",e=>e==null?0:ne(e)],disabled:[2,"disabled","disabled",ee]},outputs:{activation:"activation",expandedChange:"expandedChange"},exportAs:["matTreeNode"],features:[Z([{provide:Ze,useExisting:o}]),xe]})}return o})(),ir=(()=>{class o extends gi{data;static \u0275fac=(()=>{let e;return function(n){return(e||(e=Qe(o)))(n||o)}})();static \u0275dir=j({type:o,selectors:[["","matTreeNodeDef",""]],inputs:{when:[0,"matTreeNodeDefWhen","when"],data:[0,"matTreeNode","data"]},features:[Z([{provide:gi,useExisting:o}]),xe]})}return o})();var nr=(()=>{class o extends tn{get level(){return this._level}set level(e){this._setLevelInput(e)}get indent(){return this._indent}set indent(e){this._setIndentInput(e)}static \u0275fac=(()=>{let e;return function(n){return(e||(e=Qe(o)))(n||o)}})();static \u0275dir=j({type:o,selectors:[["","matTreeNodePadding",""]],inputs:{level:[2,"matTreeNodePadding","level",ne],indent:[0,"matTreeNodePaddingIndent","indent"]},features:[Z([{provide:tn,useExisting:o}]),xe]})}return o})(),er=(()=>{class o{viewContainer=b(tt);_node=b(en,{optional:!0});static \u0275fac=function(i){return new(i||o)};static \u0275dir=j({type:o,selectors:[["","matTreeNodeOutlet",""]],features:[Z([{provide:ui,useExisting:o}])]})}return o})(),or=(()=>{class o extends lt{_nodeOutlet=void 0;static \u0275fac=(()=>{let e;return function(n){return(e||(e=Qe(o)))(n||o)}})();static \u0275cmp=B({type:o,selectors:[["mat-tree"]],viewQuery:function(i,n){if(i&1&&ce(er,7),i&2){let r;ae(r=se())&&(n._nodeOutlet=r.first)}},hostAttrs:[1,"mat-tree"],exportAs:["matTree"],features:[Z([{provide:lt,useExisting:o}]),xe],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(i,n){i&1&&Ne(0,0)},dependencies:[er],styles:[`.mat-tree{display:block;background-color:var(--mat-tree-container-background-color, var(--mat-sys-surface))}.mat-tree-node,.mat-nested-tree-node{color:var(--mat-tree-node-text-color, var(--mat-sys-on-surface));font-family:var(--mat-tree-node-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-tree-node-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-tree-node-text-weight, var(--mat-sys-body-large-weight))}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word;min-height:var(--mat-tree-node-min-height, 48px)}.mat-nested-tree-node{border-bottom-width:0}
`],encapsulation:2})}return o})(),rr=(()=>{class o extends nn{static \u0275fac=(()=>{let e;return function(n){return(e||(e=Qe(o)))(n||o)}})();static \u0275dir=j({type:o,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:[0,"matTreeNodeToggleRecursive","recursive"]},features:[Z([{provide:nn,useExisting:o}]),xe]})}return o})();var ar=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=pe({type:o});static \u0275inj=he({imports:[Jo,$e]})}return o})();var fi={};kn(fi,{affine:()=>Rs,bufferTime:()=>As,mean_moving:()=>Ns,noiseDerived:()=>Ls,noiseGenerator:()=>Os,plot:()=>Bs,stack:()=>Vs,subtract:()=>Hs,sum:()=>zs});var Rs=async(o,t,e)=>{if(!o||o.length===0)return{output:[]};let i=e.m??1,n=e.b??0,r=[];for(let a of o){let s=new Float32Array(a.length);for(let c=0;c<a.length;c++)s[c]=i*a[c]+n;r.push(s)}return{output:r}};var Dt=null,As=async(o,t,e)=>{let i=t.sampleRate,n=e.seconds??1;if(!i||i<=0)throw new Error("bufferKernel: sampleRate param is required and must be > 0");if(!o||o.length===0)return{output:[]};let r=Math.floor(n*i);(!Dt||Dt.length!==o.length)&&(Dt=o.map(()=>new Float32Array(0)));let a=[];for(let s=0;s<o.length;s++){let c=Dt[s],d=o[s],p=new Float32Array(c.length+d.length);p.set(c,0),p.set(d,c.length);let v=p.length>r?p.slice(p.length-r):p;Dt[s]=v,a.push(v)}return{output:a}};var Ns=(()=>{let o=[];return async(t,e,i)=>{if(!t?.length)return{output:[]};let n=Math.max(1,i.window??1),r=[];o.length=t.length;for(let a=0;a<t.length;a++){let s=t[a],c=o[a]??new Float32Array(0),d=new Float32Array(c.length+s.length);d.set(c,0),d.set(s,c.length);let p=new Float32Array(s.length);p.fill(Number.NaN);let v=0,u=Math.max(0,c.length-(n-1));for(let x=u;x<c.length;x++)v+=c[x];for(let x=c.length;x<d.length;x++)v+=d[x],x>=n&&(v-=d[x-n]),x>=n-1&&(p[x-c.length]=v/n);o[a]=n>1?d.slice(-(n-1)):new Float32Array(0),r.push(p)}return{output:r}}})();var Fs=o=>new Promise(t=>setTimeout(t,o));async function*Os(){for(;;){let n=performance.now(),r=[];for(let c=0;c<32;c++){let d=new Float32Array(256);for(let p=0;p<256;p++)d[p]=Math.random()*100;r.push(d)}yield{output:r,extras:{sampleRate:1e3,blockSize:256,channels:32,channelNames:Array.from({length:32},(c,d)=>`Channel ${d+1}`)}};let a=performance.now()-n,s=Math.max(0,256-a);await Fs(s)}}var Ls=async(o,t,e)=>{let i=e?.channels??1,n=e?.blockSize??2,r=[];for(let a=0;a<i;a++){let s=new Float32Array(n);for(let c=0;c<n;c++)s[c]=Math.random()*100;r.push(s)}return{output:r}};var Bs=async(o,t,e)=>{let i=e.gain??1,n=e.spacing??0;if(i===1&&n===0)return{output:o,extras:G(G({},t),e)};let r=[];for(let a=0;a<o.length;a++){let s=o[a],c=s.length,d=0;if(n!==0){for(let u=0;u<c;u++)d+=s[u];d/=c}let p=a*n,v=new Float32Array(c);for(let u=0;u<c;u++)v[u]=(s[u]-d)*i+p;r.push(v)}return{output:r,extras:G(G({},t),e)}};var Vs=async(o,t,e)=>{if(!o||o.length===0)return{output:[]};let i=e.gain??1,n=e.spacing??0,r=[];for(let a=0;a<o.length;a++){let s=o[a],c=s.length,d=0;for(let u=0;u<c;u++)d+=s[u];d/=c;let p=a*n,v=new Float32Array(c);for(let u=0;u<c;u++)v[u]=(s[u]-d)*i+p;r.push(v)}return{output:r}};var Hs=async(o,t,e)=>{if(!o||o.length<2||o.length%2!==0)throw new Error("Subtract kernel requires an even number of input channels (A | B)");let n=o.length/2,r=o[0].length;for(let s of o)if(s.length!==r)throw new Error("All input channels must have the same length");let a=[];for(let s=0;s<n;s++){let c=o[s],d=o[s+n],p=new Float32Array(r);for(let v=0;v<r;v++)p[v]=c[v]-d[v];a.push(p)}return{output:a}};var zs=async(o,t,e)=>{if(!o||o.length<2||o.length%2!==0)throw new Error("Sum kernel requires an even number of input channels (A | B)");let n=o.length/2,r=o[0].length;for(let s of o)if(s.length!==r)throw new Error("All input channels must have the same length");let a=[];for(let s=0;s<n;s++){let c=o[s],d=o[s+n],p=new Float32Array(r);for(let v=0;v<r;v++)p[v]=c[v]+d[v];a.push(p)}return{output:a}};function sr(o){let t=fi[o.kernel.split(".")[1]];if(!t)throw new Error(`TS generator "${o.kernel}" not found`);return()=>{let e=t();if(!e||typeof e[Symbol.asyncIterator]!="function")throw new Error(`Kernel "${o.kernel}" does not return an AsyncGenerator`);return e}}function _i(o){let t=fi[o.kernel.split(".")[1]];if(!t)throw new Error(`TS kernel "${o.kernel}" not found`);let e=o.type!=="derived"&&(o.params?.length!==0||o.controls?.length!==0||!0);return async(i=[],n={},r={})=>{if(e&&(!i||i.length===0))throw new Error(`TS kernel "${o.kernel}" requires input`);let a={};for(let d of o.params??[])a[d.label]=d.label in n?n[d.label]:d.default;let s={};for(let d of o.controls??[])s[d.label]=d.label in r?r[d.label]:d.value;let c=await t(i??[],a,s);return c.output||(c.output=[]),{output:c.output??[],extras:c.extras??{}}}}async function Ks(o={}){var t;(function(){function l(U){U=U.split("-")[0];for(var re=U.split(".").slice(0,3);re.length<3;)re.push("00");return re=re.map((Me,Ei,Pt)=>Me.padStart(2,"0")),re.join("")}var h=U=>[U/1e4|0,(U/100|0)%100,U%100].join("."),g=2147483647,D=typeof process<"u"&&process.versions?.node?l(process.versions.node):g;if(D<g)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");if(D<2147483647)throw new Error(`This emscripten-generated code requires node v${h(2147483647)} (detected v${h(D)})`);var I=typeof navigator<"u"&&navigator.userAgent;if(I){var H=I.includes("Safari/")&&I.match(/Version\/(\d+\.?\d*\.?\d*)/)?l(I.match(/Version\/(\d+\.?\d*\.?\d*)/)[1]):g;if(H<15e4)throw new Error(`This emscripten-generated code requires Safari v${h(15e4)} (detected v${H})`);var P=I.match(/Firefox\/(\d+(?:\.\d+)?)/)?parseFloat(I.match(/Firefox\/(\d+(?:\.\d+)?)/)[1]):g;if(P<79)throw new Error(`This emscripten-generated code requires Firefox v79 (detected v${P})`);var N=I.match(/Chrome\/(\d+(?:\.\d+)?)/)?parseFloat(I.match(/Chrome\/(\d+(?:\.\d+)?)/)[1]):g;if(N<85)throw new Error(`This emscripten-generated code requires Chrome v85 (detected v${N})`)}})();var e=o,i=!0,n=!1,r=!1,a=!1,s=[],c="./this.program",d=import.meta.url,p="";function v(l){return e.locateFile?e.locateFile(l,p):p+l}var u,x;if(!a)if(i||n){try{p=new URL(".",d).href}catch{}if(!(globalThis.window||globalThis.WorkerGlobalScope))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");u=async l=>{m(!oe(l),"readAsync does not work with file:// URLs");var h=await fetch(l,{credentials:"same-origin"});if(h.ok)return h.arrayBuffer();throw new Error(h.status+" : "+h.url)}}else throw new Error("environment detection error");var V=console.log.bind(console),C=console.error.bind(console);m(!n,"worker environment detected but not enabled at build time.  Add `worker` to `-sENVIRONMENT` to enable."),m(!r,"node environment detected but not enabled at build time.  Add `node` to `-sENVIRONMENT` to enable."),m(!a,"shell environment detected but not enabled at build time.  Add `shell` to `-sENVIRONMENT` to enable.");var T;globalThis.WebAssembly||C("no native wasm support detected");var E=!1;function m(l,h){l||ve("Assertion failed"+(h?": "+h:""))}var oe=l=>l.startsWith("file://");function Ie(){var l=Di();m((l&3)==0),l==0&&(l+=4),De[l>>2]=34821223,De[l+4>>2]=2310721022,De[0]=1668509029}function Ce(){if(!E){var l=Di();l==0&&(l+=4);var h=De[l>>2],g=De[l+4>>2];(h!=34821223||g!=2310721022)&&ve(`Stack overflow! Stack cookie has been overwritten at ${ht(l)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${ht(g)} ${ht(h)}`),De[0]!=1668509029&&ve("Runtime error: The application has corrupted its heap memory area (address zero)!")}}var ln=!0;(()=>{var l=new Int16Array(1),h=new Int8Array(l.buffer);l[0]=25459,(h[0]!==115||h[1]!==99)&&ve("Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)")})();function Xe(l){Object.getOwnPropertyDescriptor(e,l)||Object.defineProperty(e,l,{configurable:!0,set(){ve(`Attempt to set \`Module.${l}\` after it has already been processed.  This can happen, for example, when code is injected via '--post-js' rather than '--pre-js'`)}})}function ie(l){return()=>m(!1,`call to '${l}' via reference taken before Wasm module initialization`)}function je(l){Object.getOwnPropertyDescriptor(e,l)&&ve(`\`Module.${l}\` was supplied but \`${l}\` not included in INCOMING_MODULE_JS_API`)}function L(l){return l==="FS_createPath"||l==="FS_createDataFile"||l==="FS_createPreloadedFile"||l==="FS_preloadFile"||l==="FS_unlink"||l==="addRunDependency"||l==="FS_createLazyFile"||l==="FS_createDevice"||l==="removeRunDependency"}function Pe(l){Et(l)}function Et(l){Object.getOwnPropertyDescriptor(e,l)||Object.defineProperty(e,l,{configurable:!0,get(){var h=`'${l}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;L(l)&&(h+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),ve(h)}})}var cn,dn,hn,dt,gr,fr,_r,De,vr,yr,br,wr,Tt=!1;function pn(){var l=It.buffer;e.HEAP8=hn=new Int8Array(l),e.HEAP16=gr=new Int16Array(l),e.HEAPU8=dt=new Uint8Array(l),e.HEAPU16=fr=new Uint16Array(l),e.HEAP32=_r=new Int32Array(l),e.HEAPU32=De=new Uint32Array(l),e.HEAPF32=vr=new Float32Array(l),e.HEAPF64=yr=new Float64Array(l),br=new BigInt64Array(l),wr=new BigUint64Array(l)}m(globalThis.Int32Array&&globalThis.Float64Array&&Int32Array.prototype.subarray&&Int32Array.prototype.set,"JS engine does not provide full typed array support");function xr(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Ar(e.preRun.shift());Xe("preRun"),mn(gn)}function Cr(){m(!Tt),Tt=!0,Ce(),Je.__wasm_call_ctors()}function Dr(){if(Ce(),e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Rr(e.postRun.shift());Xe("postRun"),mn(un)}function ve(l){e.onAbort?.(l),l="Aborted("+l+")",C(l),E=!0;var h=new WebAssembly.RuntimeError(l);throw dn?.(h),h}var ye={error(){ve("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM")},init(){ye.error()},createDataFile(){ye.error()},createPreloadedFile(){ye.error()},createLazyFile(){ye.error()},open(){ye.error()},mkdev(){ye.error()},registerDevice(){ye.error()},analyzePath(){ye.error()},ErrnoError(){ye.error()}};function St(l,h){return(...g)=>{m(Tt,`native function \`${l}\` called before runtime initialization`);var D=Je[l];return m(D,`exported native function \`${l}\` not found`),m(g.length<=h,`native function \`${l}\` called with ${g.length} args but expects ${h}`),D(...g)}}var wi;function Er(){return e.locateFile?v("compute.wasm"):new URL("compute.wasm",import.meta.url).href}function Tr(l){if(l==wi&&T)return new Uint8Array(T);if(x)return x(l);throw"both async and sync fetching of the wasm failed"}async function Sr(l){if(!T)try{var h=await u(l);return new Uint8Array(h)}catch{}return Tr(l)}async function kr(l,h){try{var g=await Sr(l),D=await WebAssembly.instantiate(g,h);return D}catch(I){C(`failed to asynchronously prepare wasm: ${I}`),oe(l)&&C(`warning: Loading from a file URI (${l}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),ve(I)}}async function Ir(l,h,g){if(!l)try{var D=fetch(h,{credentials:"same-origin"}),I=await WebAssembly.instantiateStreaming(D,g);return I}catch(H){C(`wasm streaming compile failed: ${H}`),C("falling back to ArrayBuffer instantiation")}return kr(h,g)}function Pr(){var l={env:Dn,wasi_snapshot_preview1:Dn};return l}async function Mr(){function l(P,N){return Je=P.exports,la(Je),pn(),Je}var h=e;function g(P){return m(e===h,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),h=null,l(P.instance)}var D=Pr();if(e.instantiateWasm)return new Promise((P,N)=>{try{e.instantiateWasm(D,(U,re)=>{P(l(U,re))})}catch(U){C(`Module.instantiateWasm callback failed with error: ${U}`),N(U)}});wi??=Er();var I=await Ir(T,wi,D),H=g(I);return H}class dl{name="ExitStatus";constructor(h){this.message=`Program terminated with exit(${h})`,this.status=h}}var mn=l=>{for(;l.length>0;)l.shift()(e)},un=[],Rr=l=>un.push(l),gn=[],Ar=l=>gn.push(l),Nr=!0,ht=l=>(m(typeof l=="number",`ptrToString expects a number, got ${typeof l}`),l>>>=0,"0x"+l.toString(16).padStart(8,"0")),Fr=l=>wn(l),Or=()=>Cn(),pt=l=>{pt.shown||={},pt.shown[l]||(pt.shown[l]=1,C(l))},fn=globalThis.TextDecoder&&new TextDecoder,Lr=(l,h,g,D)=>{var I=h+g;if(D)return I;for(;l[h]&&!(h>=I);)++h;return h},_n=(l,h=0,g,D)=>{var I=Lr(l,h,g,D);if(I-h>16&&l.buffer&&fn)return fn.decode(l.subarray(h,I));for(var H="";h<I;){var P=l[h++];if(!(P&128)){H+=String.fromCharCode(P);continue}var N=l[h++]&63;if((P&224)==192){H+=String.fromCharCode((P&31)<<6|N);continue}var U=l[h++]&63;if((P&240)==224?P=(P&15)<<12|N<<6|U:((P&248)!=240&&pt("Invalid UTF-8 leading byte "+ht(P)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),P=(P&7)<<18|N<<12|U<<6|l[h++]&63),P<65536)H+=String.fromCharCode(P);else{var re=P-65536;H+=String.fromCharCode(55296|re>>10,56320|re&1023)}}return H},kt=(l,h,g)=>(m(typeof l=="number",`UTF8ToString expects a number (got ${typeof l})`),l?_n(dt,l,h,g):""),Br=(l,h,g,D)=>ve(`Assertion failed: ${kt(l)}, at: `+[h?kt(h):"unknown filename",g,D?kt(D):"unknown function"]),Vr=()=>2147483648,Hr=(l,h)=>(m(h,"alignment argument is required"),Math.ceil(l/h)*h),zr=l=>{var h=It.buffer.byteLength,g=(l-h+65535)/65536|0;try{return It.grow(g),pn(),1}catch(D){C(`growMemory: Attempted to grow heap from ${h} bytes to ${l} bytes, but got error: ${D}`)}},Kr=l=>{var h=dt.length;l>>>=0,m(l>h);var g=Vr();if(l>g)return C(`Cannot enlarge memory, requested ${l} bytes, but the limit is ${g} bytes!`),!1;for(var D=1;D<=4;D*=2){var I=h*(1+.2/D);I=Math.min(I,l+100663296);var H=Math.min(g,Hr(Math.max(l,I),65536)),P=zr(H);if(P)return!0}return C(`Failed to grow the heap from ${h} bytes to ${H} bytes, not enough memory!`),!1},xi=[null,[],[]],Ci=(l,h)=>{var g=xi[l];m(g),h===0||h===10?((l===1?V:C)(_n(g)),g.length=0):g.push(h)},hl=()=>{yn(0),xi[1].length&&Ci(1,10),xi[2].length&&Ci(2,10)},Ur=(l,h,g,D)=>{for(var I=0,H=0;H<g;H++){var P=De[h>>2],N=De[h+4>>2];h+=8;for(var U=0;U<N;U++)Ci(l,dt[P+U]);I+=N}return De[D>>2]=I,0},Gr=l=>{var h=e["_"+l];return m(h,"Cannot call unknown function "+l+", make sure it is exported"),h},$r=(l,h)=>{m(l.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),hn.set(l,h)},jr=l=>{for(var h=0,g=0;g<l.length;++g){var D=l.charCodeAt(g);D<=127?h++:D<=2047?h+=2:D>=55296&&D<=57343?(h+=4,++g):h+=3}return h},Wr=(l,h,g,D)=>{if(m(typeof l=="string",`stringToUTF8Array expects a string (got ${typeof l})`),!(D>0))return 0;for(var I=g,H=g+D-1,P=0;P<l.length;++P){var N=l.codePointAt(P);if(N<=127){if(g>=H)break;h[g++]=N}else if(N<=2047){if(g+1>=H)break;h[g++]=192|N>>6,h[g++]=128|N&63}else if(N<=65535){if(g+2>=H)break;h[g++]=224|N>>12,h[g++]=128|N>>6&63,h[g++]=128|N&63}else{if(g+3>=H)break;N>1114111&&pt("Invalid Unicode code point "+ht(N)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),h[g++]=240|N>>18,h[g++]=128|N>>12&63,h[g++]=128|N>>6&63,h[g++]=128|N&63,P++}}return h[g]=0,g-I},qr=(l,h,g)=>(m(typeof g=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),Wr(l,dt,h,g)),vn=l=>xn(l),Qr=l=>{var h=jr(l)+1,g=vn(h);return qr(l,g,h),g},Yr=(l,h,g,D,I)=>{var H={string:de=>{var mt=0;return de!=null&&de!==0&&(mt=Qr(de)),mt},array:de=>{var mt=vn(de.length);return $r(de,mt),mt}};function P(de){return h==="string"?kt(de):h==="boolean"?!!de:de}var N=Gr(l),U=[],re=0;if(m(h!=="array",'Return type should not be "array".'),D)for(var Me=0;Me<D.length;Me++){var Ei=H[g[Me]];Ei?(re===0&&(re=Or()),U[Me]=Ei(D[Me])):U[Me]=D[Me]}var Pt=N(...U);function ha(de){return re!==0&&Fr(re),P(de)}return Pt=ha(Pt),Pt},Zr=(l,h,g,D)=>(...I)=>Yr(l,h,g,I,D);{if(e.noExitRuntime&&(Nr=e.noExitRuntime),e.print&&(V=e.print),e.printErr&&(C=e.printErr),e.wasmBinary&&(T=e.wasmBinary),e.FS_createDataFile=ye.createDataFile,e.FS_createPreloadedFile=ye.createPreloadedFile,ea(),e.arguments&&(s=e.arguments),e.thisProgram&&(c=e.thisProgram),m(typeof e.memoryInitializerPrefixURL>"u","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),m(typeof e.pthreadMainPrefixURL>"u","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),m(typeof e.cdInitializerPrefixURL>"u","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),m(typeof e.filePackagePrefixURL>"u","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),m(typeof e.read>"u","Module.read option was removed"),m(typeof e.readAsync>"u","Module.readAsync option was removed (modify readAsync in JS)"),m(typeof e.readBinary>"u","Module.readBinary option was removed (modify readBinary in JS)"),m(typeof e.setWindowTitle>"u","Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),m(typeof e.TOTAL_MEMORY>"u","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),m(typeof e.ENVIRONMENT>"u","Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)"),m(typeof e.STACK_SIZE>"u","STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),m(typeof e.wasmMemory>"u","Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),m(typeof e.INITIAL_MEMORY>"u","Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically"),e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.shift()();Xe("preInit")}e.cwrap=Zr;var Xr=["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","bigintToI53Checked","getTempRet0","setTempRet0","createNamedFunction","zeroMemory","exitJS","withStackSave","strError","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","readEmAsmArgs","jstoi_q","getExecutableName","autoResumeAudioContext","getDynCaller","dynCall","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asyncLoad","asmjsMangle","mmapAlloc","HandleAllocator","getUniqueRunDependency","addRunDependency","removeRunDependency","addOnInit","addOnPostCtor","addOnPreMain","addOnExit","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","stringToNewUTF8","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","getEnvStrings","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","initRandomFill","randomFill","safeSetTimeout","setImmediateWrapped","safeRequestAnimationFrame","clearImmediateWrapped","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","ExceptionInfo","findMatchingCatch","Browser_asyncPrepareDataCounter","isLeapYear","ydayFromDate","arraySum","addDays","getSocketFromFD","getSocketAddress","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","allocateUTF8","allocateUTF8OnStack","demangle","stackTrace","getNativeTypeSize"];Xr.forEach(Pe);var Jr=["run","out","err","callMain","abort","wasmExports","HEAP64","HEAPU64","writeStackCookie","checkStackCookie","INT53_MAX","INT53_MIN","stackSave","stackRestore","stackAlloc","ptrToString","getHeapMax","growMemory","ENV","ERRNO_CODES","DNS","Protocols","Sockets","timers","warnOnce","readEmAsmArgsArray","alignMemory","wasmTable","wasmMemory","noExitRuntime","addOnPreRun","addOnPostRun","ccall","freeTableIndexes","functionsInTableMap","setValue","getValue","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","UTF16Decoder","stringToUTF8OnStack","writeArrayToMemory","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","flush_NO_FILESYSTEM","emSetImmediate","emClearImmediate_deps","emClearImmediate","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","Browser","requestFullscreen","requestFullScreen","setCanvasSize","getUserMedia","createContext","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","SYSCALLS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","print","printErr","jstoi_s"];Jr.forEach(Et);function ea(){je("fetchSettings")}var ta=e._min_max_normalize=ie("_min_max_normalize"),yn=ie("_fflush"),ia=e._free=ie("_free"),na=e._malloc=ie("_malloc"),bn=ie("_emscripten_stack_init"),oa=ie("_emscripten_stack_get_free"),ra=ie("_emscripten_stack_get_base"),Di=ie("_emscripten_stack_get_end"),wn=ie("__emscripten_stack_restore"),xn=ie("__emscripten_stack_alloc"),Cn=ie("_emscripten_stack_get_current"),aa=ie("memory"),sa=ie("__indirect_function_table"),It=ie("wasmMemory");function la(l){m(typeof l.min_max_normalize<"u","missing Wasm export: min_max_normalize"),m(typeof l.fflush<"u","missing Wasm export: fflush"),m(typeof l.free<"u","missing Wasm export: free"),m(typeof l.malloc<"u","missing Wasm export: malloc"),m(typeof l.emscripten_stack_init<"u","missing Wasm export: emscripten_stack_init"),m(typeof l.emscripten_stack_get_free<"u","missing Wasm export: emscripten_stack_get_free"),m(typeof l.emscripten_stack_get_base<"u","missing Wasm export: emscripten_stack_get_base"),m(typeof l.emscripten_stack_get_end<"u","missing Wasm export: emscripten_stack_get_end"),m(typeof l._emscripten_stack_restore<"u","missing Wasm export: _emscripten_stack_restore"),m(typeof l._emscripten_stack_alloc<"u","missing Wasm export: _emscripten_stack_alloc"),m(typeof l.emscripten_stack_get_current<"u","missing Wasm export: emscripten_stack_get_current"),m(typeof l.memory<"u","missing Wasm export: memory"),m(typeof l.__indirect_function_table<"u","missing Wasm export: __indirect_function_table"),ta=e._min_max_normalize=St("min_max_normalize",10),yn=St("fflush",1),ia=e._free=St("free",1),na=e._malloc=St("malloc",1),bn=l.emscripten_stack_init,oa=l.emscripten_stack_get_free,ra=l.emscripten_stack_get_base,Di=l.emscripten_stack_get_end,wn=l._emscripten_stack_restore,xn=l._emscripten_stack_alloc,Cn=l.emscripten_stack_get_current,aa=It=l.memory,sa=l.__indirect_function_table}var Dn={__assert_fail:Br,emscripten_resize_heap:Kr,fd_write:Ur},En;function ca(){bn(),Ie()}function da(){ca(),xr();function l(){m(!En),En=!0,e.calledRun=!0,!E&&(Cr(),cn?.(e),e.onRuntimeInitialized?.(),Xe("onRuntimeInitialized"),m(!e._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),Dr())}e.setStatus?(e.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>e.setStatus(""),1),l()},1)):l(),Ce()}var Je;Je=await Mr(),da(),Tt?t=e:t=new Promise((l,h)=>{cn=l,dn=h});for(let l of Object.keys(e))l in o||Object.defineProperty(o,l,{configurable:!0,get(){ve(`Access to module property ('${l}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return t}var lr=Ks;var on=null;async function cr(){return on||(on=lr({locateFile:o=>`/assets/wasm/${o}`,print:console.log,printErr:console.error})),on}async function Us(o){return(await cr()).cwrap(o,null,["number","number","number","number","number","number","number","number","number","number"])}async function dr(o,t,e=new Float32Array(0),i=new Float32Array(0),n=0){let r=await cr(),a=await Us(o);if(!r.HEAPF32)throw new Error("WASM module not properly initialized: HEAPF32 is undefined");let s=t.data.length,c=t.frames*t.channels;if(s!==c)throw new Error(`Invalid frame shape: frames*channels=${c}, data.length=${s}`);let d=r._malloc(s*Float32Array.BYTES_PER_ELEMENT),p=r._malloc(s*Float32Array.BYTES_PER_ELEMENT),v=r._malloc(i.length*Float32Array.BYTES_PER_ELEMENT),u=r._malloc(e.length*Float32Array.BYTES_PER_ELEMENT),x=r._malloc(n*Float32Array.BYTES_PER_ELEMENT);try{let V=d>>2,C=v>>2,T=u>>2;r.HEAPF32.subarray(V,V+s).set(t.data),r.HEAPF32.subarray(C,C+i.length).set(i),e.length>0&&r.HEAPF32.subarray(T,T+e.length).set(e),a(d,p,t.frames,t.channels,u,e.length,v,i.length,x,n);let E=new Float32Array(s);E.set(r.HEAPF32.subarray(p>>2,(p>>2)+s));let m;return n>0&&(m=new Float32Array(n),m.set(r.HEAPF32.subarray(x>>2,(x>>2)+n))),G({frame:{data:E,frames:t.frames,channels:t.channels}},m?{extras:m}:{})}finally{r._free(d),r._free(p),r._free(v),r._free(u),r._free(x)}}function hr(o){return async(t=[],e={},i={})=>{if(!t||t.length===0)throw new Error(`WASM kernel "${o.kernel}" requires input`);let n=t.length,r=t[0].length;for(let E=1;E<n;E++)if(t[E].length!==r)throw new Error(`Channel length mismatch in kernel "${o.kernel}"`);let a=new Float32Array(r*n);for(let E=0;E<r;E++)for(let m=0;m<n;m++)a[E*n+m]=t[m][E];let s={data:a,frames:r,channels:n},c=o.params??[],d=new Float32Array(c.length);c.forEach((E,m)=>{E.label in e?d[m]=e[E.label]:d[m]=E.default});let p=o.controls??[],v=new Float32Array(p.length);p.forEach((E,m)=>{E.label in i?v[m]=i[E.label]:v[m]=E.value});let u=o.out?.length??0,{frame:x,extras:V}=await dr(o.kernel.split(".")[1],s,d,v,u),C=[];for(let E=0;E<x.channels;E++){let m=new Float32Array(x.frames);for(let oe=0;oe<x.frames;oe++)m[oe]=x.data[oe*x.channels+E];C.push(m)}let T;return o.out&&V&&(T={},o.out.forEach((E,m)=>{T[E]=V[m]})),{output:C,extras:T??{}}}}function rn(o){if(o.kernel.startsWith("wasm."))return hr(o);if(o.kernel.startsWith("ts."))return _i(o);throw new Error(`Unknown kernel: ${o.kernel}`)}function pr(o){return sr(o)}function mr(o){if("output"in o||"extras"in o)return o;if(typeof o=="function")return o();throw new Error("Invalid kernel result type in pipeline")}var vi=class o{_plots$=new Ee({});plot$=this._plots$.asObservable();running=!1;lastNodesCount=0;lastEdgesCount=0;lastEdgesArgsCount=0;activeRunId=0;loopPromise=null;loopRunId=0;setPlots(t){this._plots$.next(t)}removePlot(t){let r=this._plots$.getValue(),{[t]:i}=r,n=Sn(r,[Tn(t)]);this._plots$.next(n)}addPlot(t){let e=this._plots$.getValue();this._plots$.next(G(G({},e),t))}clear(){this._plots$.next({})}async runPipeline(t,e,i){function n(C){return C.filter(T=>T.from!=="POINTER"&&T.to!=="POINTER").length}let r=this.lastNodesCount===t.length&&this.lastEdgesCount===n(e)&&this.lastEdgesArgsCount===n(i);if(this.lastNodesCount=t.length,this.lastEdgesCount=n(e),this.lastEdgesArgsCount=n(i),r&&this.loopPromise&&this.loopRunId===this.activeRunId)return;r||(this.activeRunId+=1);let a=this.activeRunId;this.loopRunId=a,this.running=!0;let s=t.find(C=>C.node.type==="generator");if(!s){this.clear();return}let c=t.filter(C=>C.node.type==="derived"),d=t.filter(C=>C.node.type!=="generator"&&C.node.type!=="derived"),v=pr(s.node)(),u=1,x=new Set,V=(async()=>{for await(let C of v){if(!this.running||a!==this.activeRunId)break;let T=this.executeOnce(C,s,c,d,e,i,a);x.add(T),T.finally(()=>x.delete(T)),x.size>=u&&await Promise.race(x)}x.size>0&&await Promise.allSettled(Array.from(x))})();this.loopPromise=V,await V,this.loopPromise===V&&(this.loopPromise=null)}async executeOnce(t,e,i,n,r,a,s){if(!this.running||s!==this.activeRunId)return;let c={};c[`${e.id}.output`]=t.output;for(let[u,x]of Object.entries(t.extras??{}))c[`${e.id}.${u}`]=x;for(let u of i){let x=rn(u.node),V=Object.fromEntries((u.node.controls??[]).map(E=>[E.label,E.value])),C=await x([],{},V),T=mr(C);if(c[`${u.id}.output`]=T.output,T.extras)for(let[E,m]of Object.entries(T.extras))c[`${u.id}.${E}`]=m}let d=!0;for(;d;){d=!1;for(let u of n){let x=`${u.id}.output`;if(x in c)continue;let V=r.find(L=>L.to===`${u.id}.input`),C=r.find(L=>L.to===`${u.id}.input2`);if(!V)continue;let T=V.from,E=a.filter(L=>L.to.startsWith(u.id)).map(L=>L.from),m=a.filter(L=>L.to.startsWith(u.id)).reduce((L,Pe)=>(L[Pe.from]=Pe.to.split(".")[1]??"",L),{});if(![T,...E].every(L=>L in c)||C&&![C.from].every(Et=>Et in c))continue;let Ie=rn(u.node),Ce=Object.fromEntries((u.node.controls??[]).map(L=>[L.label,L.value])),ln=Object.fromEntries(Object.entries(c).filter(([L])=>E.includes(L)).map(([L,Pe])=>[m[L],Pe])),Xe=[...c[T],...C?c[C.from]:[]],ie=await Ie(Xe,ln,Ce),je=mr(ie);if(u.node.type==="visualization"){if(!this.running||s!==this.activeRunId)return;this.addPlot({[u.id]:je}),c[x]=!0}else if(je.output&&(c[x]=je.output),je.extras)for(let[L,Pe]of Object.entries(je.extras))c[`${u.id}.${L}`]=Pe;d=!0}}let p=new Set(Object.keys(c).filter(u=>u.endsWith(".output")).map(u=>u.split(".")[0])),v=n.map(u=>u.id).filter(u=>!p.has(u));for(let u of n){if(!this.running||s!==this.activeRunId)return;!p.has(u.id)&&u.node.type==="visualization"&&this.removePlot(u.id)}}static \u0275fac=function(e){return new(e||o)};static \u0275prov=ft({token:o,factory:o.\u0275fac,providedIn:"root"})};var $s=(o,t)=>t.id;function js(o,t){if(o&1){let e=J();f(0,"div",5)(1,"app-toggle",6),M("valueChange",function(n){R(e);let r=w();return A(r.toggleArguments(n))}),y()()}if(o&2){let e=w();_(),S("value",e.hideArgs())("sessionStorage",!0)}}function Ws(o,t){if(o&1){let e=J();f(0,"mat-tree-node",10),M("click",function(){let n=R(e).$implicit,r=w(2);return A(r.addNode(n))}),f(1,"div",11)(2,"button",12)(3,"mat-icon"),k(4),Bt(5,"icon"),y()(),k(6),y()()}if(o&2){let e=t.$implicit;_(3),Q("rotated-90",e.kernel.type==="merge"),_(),Y(Vt(5,4,e.kernel.type)),_(2),Oe(" ",e.name," ")}}function qs(o,t){if(o&1&&(f(0,"mat-tree-node",13)(1,"button",14)(2,"mat-icon",15),k(3),y()(),k(4),y()),o&2){let e=t.$implicit;w();let i=Ke(1);S("cdkTreeNodeTypeaheadLabel",e.name),_(3),Oe(" ",i.isExpanded(e)?"expand_more":"chevron_right"," "),_(),Oe(" ",e.name," ")}}function Qs(o,t){if(o&1&&(f(0,"mat-tree",7,3),Ve(2,Ws,7,6,"mat-tree-node",8)(3,qs,5,3,"mat-tree-node",9),y()),o&2){let e=w();Q("collapsed",e.toogleTree()),S("dataSource",e.TreeKernelNodes)("childrenAccessor",e.childrenAccessor),_(3),S("matTreeNodeDefWhen",e.hasChild)}}function Ys(o,t){if(o&1&&(Ae(),W(0,"path",18)),o&2){let e=t.$implicit,i=w(2);q("d",e)("stroke",i.edgeColor())}}function Zs(o,t){if(o&1&&(Ae(),W(0,"path",22)),o&2){let e=t.$implicit,i=w(3);q("d",e)("stroke",i.edgeArgColor())}}function Xs(o,t){if(o&1&&(Ae(),f(0,"svg",17),ge(1,Zs,1,2,":svg:path",22,Nt),y()),o&2){let e=w(2);Se("width",e.width)("height",e.height),_(),fe(e.svgEdgesArgs)}}function Js(o,t){if(o&1){let e=J();f(0,"app-node",23),M("moved",function(n){R(e);let r=w(2);return A(r.updateNodePosition(n))})("addEdge",function(n){R(e);let r=w(2);return A(r.addEdge(n))})("removeEdge",function(n){R(e);let r=w(2);return A(r.removeEdge(n))})("replacePointer",function(n){R(e);let r=w(2);return A(r.replacePointer(n))})("pointerdown",function(n){R(e);let r=w(2);return A(r.onNodePointerDown(n))})("click",function(){let n=R(e).$implicit,r=w(2);return A(r.onNodeClick(n))}),y()}if(o&2){let e=t.$implicit,i=w(2);S("id",e.id)("x",e.x)("y",e.y)("node",e.node)("hideArgs",i.hideArgs())("selected",i.selectedNode()===e.id),q("id",e.id)}}function el(o,t){if(o&1){let e=J();f(0,"div",16,4),M("mousemove",function(n){R(e);let r=w();return A(r.onMouseMove(n))})("pointerdown",function(n){R(e);let r=w();return A(r.onWorkspacePointerDown(n))})("keydown",function(n){R(e);let r=w();return A(r.onKey(n))}),Ae(),f(2,"svg",17),ge(3,Ys,1,2,":svg:path",18,Nt),y(),z(5,Xs,3,4,":svg:svg",19),Nn(),f(6,"div",20),ge(7,Js,1,7,"app-node",21,$s),y()()}if(o&2){let e=w();Se("width",e.width)("height",e.height)("background-image",e.onlyPipelines?null:"url(/assets/images/tiles/tile_"+e.themeService.mode()+".svg)"),Q("no-background",e.onlyPipelines),_(2),Se("width",e.width)("height",e.height),_(),fe(e.svgEdges),_(2),K(e.hideArgs()?-1:5),_(),Se("width",e.width)("height",e.height),_(),fe(e.nodes)}}function tl(o,t){o&1&&Ne(0)}function il(o,t){o&1&&Ne(0)}function nl(o,t){o&1&&Ne(0)}function ol(o,t){if(o&1&&(f(0,"div",39),W(1,"app-plot",40),y()),o&2){let e=t.$implicit;_(),S("dataSource",e)}}function rl(o,t){if(o&1){let e=J();Ve(0,tl,1,0,"ng-container",24),f(1,"div",25)(2,"div",26)(3,"div",27)(4,"div",28),Ve(5,il,1,0,"ng-container",24),y()(),f(6,"app-pan-scroll",29),M("onResize",function(n){R(e);let r=w();return A(r.setOffset(n))}),f(7,"button",30),M("click",function(){R(e);let n=w();return A(n.toogleTreeFn())}),f(8,"mat-icon"),k(9,"account_tree"),y()(),Ve(10,nl,1,0,"ng-container",24),y()(),f(11,"div",31)(12,"app-pan-scroll",32)(13,"div",33)(14,"mat-button-toggle-group",34),M("valueChange",function(n){R(e);let r=w();return A(r.layout.set(n))}),f(15,"mat-button-toggle",35)(16,"mat-icon"),k(17,"dock_to_bottom"),y()(),f(18,"mat-button-toggle",36)(19,"mat-icon"),k(20,"bottom_sheets"),y()(),f(21,"mat-button-toggle",37)(22,"mat-icon"),k(23,"toolbar"),y()()()(),f(24,"div",38),ge(25,ol,2,1,"div",39,Nt),y()()()()}if(o&2){let e=w(),i=Ke(1),n=Ke(3),r=Ke(5);S("ngTemplateOutlet",i),_(2),Q("collapsed",e.toogleTree()),_(),Se("height",e.layoutHeightPanScroll()),Q("collapsed",e.toogleTree()),_(),Se("height",e.layoutHeightPanScroll()),_(),S("ngTemplateOutlet",n),_(),S("height",e.layoutHeightPanScroll()),_(4),S("ngTemplateOutlet",r),_(2),S("height",e.layoutHeightVisualization()),_(2),S("value",e.layout())("hideSingleSelectionIndicator",!0),_(11),fe(e.sortedPlots())}}function al(o,t){o&1&&Ne(0)}function sl(o,t){if(o&1&&Ve(0,al,1,0,"ng-container",24),o&2){w();let e=Ke(5);S("ngTemplateOutlet",e)}}var an=300,sn=150,ct=0,yi=0,bi=0,ll=6,cl=4,ur=class o{constructor(t,e,i){this.themeService=t;this.cdr=e;this.pipelineControllerService=i;this.pipelineControllerService.plot$.subscribe(n=>this.plots.set(n)),Rt(()=>{sessionStorage.setItem("layoutPipelines",this.layout()),this.layout()==="mainBoth"?(this.layoutHeightVisualization.set("calc(50vh - 2rem"),this.layoutHeightPanScroll.set("calc(50vh - var(--toolbar-height))")):this.layout()==="mainTop"?(this.layoutHeightVisualization.set("calc(40vh - 2rem"),this.layoutHeightPanScroll.set("calc(60vh - var(--toolbar-height))")):this.layout()==="mainBottom"&&(this.layoutHeightVisualization.set("calc(60vh - 2rem"),this.layoutHeightPanScroll.set("calc(40vh - var(--toolbar-height))"))})}nodes=[];edges=[];edgesArgs=[];width="100%";height="100%";onlyPipelines=!1;run=!0;edgeColor=Ue(()=>this.themeService.getFromTheme("--mat-sys-primary-container"));edgeArgColor=Ue(()=>this.themeService.getFromTheme("--mat-sys-primary"));svgEdges=[];svgEdgesArgs=[];nodesLayer_Element;pointerRect=new DOMRect(0,0,0,0);selectedNode=$(null);hideArgs=$(!1);layout=$(sessionStorage.getItem("layoutPipelines")||"mainBoth");layoutHeightVisualization=$("");layoutHeightPanScroll=$("");plots=$({});toogleTree=$(!0);sortedPlots=Ue(()=>{let t=this.plots(),e=this.nodes,i=new Map(e.map(n=>[n.id,n.x]));return Object.entries(t).sort(([n],[r])=>{let a=i.get(n)??Number.POSITIVE_INFINITY,s=i.get(r)??Number.POSITIVE_INFINITY;return a-s}).map(([,n])=>n)});TreeKernelNodes=Xi;async ngOnChanges(){}updateNodePosition(t){let e=this.nodes.find(i=>i.id===t.id);e&&(e.x=t.x,e.y=t.y,this.updateEdges())}getRect(t){if(t==="POINTER")return this.pointerRect;let[e,i]=t.split("."),n=this.nodes.find(c=>c.id===e),a=document.getElementById(n.id).querySelector(`.port[data-port="${i}"]`);return a?a.getBoundingClientRect():new DOMRect(0,0,0,0)}getOffset(){this.nodesLayer_Element=document.getElementById("nodesLayer");let t=this.nodesLayer_Element?.getBoundingClientRect(),e=t?.x||0,i=t?.y||0;return[e,i]}updateEdges(){requestAnimationFrame(async()=>{this.svgEdges=this.edges.map(t=>{let e=this.getRect(t.from),i=this.getRect(t.to),[n,r]=this.getOffset(),a=e.x-n+e.width/2,s=e.y-r+e.height/2-2,c=i.x-n+i.width/2,d=i.y-r+i.height/2-2,p=0;a>c&&(p=(a-c)*5),p=Math.min(p,200);let v=a+50+p,u=c-50-p;return`M ${a} ${s}
        C ${v} ${s},
        ${u} ${d},
        ${c} ${d}`}),this.svgEdgesArgs=this.edgesArgs.map(t=>{let e=this.getRect(t.from),i=this.getRect(t.to),[n,r]=this.getOffset(),a=e.x-n+e.width-10,s=e.y-r+e.height/2,c=i.x-n+10,d=i.y-r+i.height/2,p=0;a>c&&(p=(a-c)*5),p=Math.min(p,200);let v=a+50+p,u=c-50-p;return`M ${a} ${s}
          C ${v} ${s},
          ${u} ${d},
          ${c} ${d}`}),await this.runPipeline()})}onMouseMove(t){let e=t.clientX,i=t.clientY,n=new DOMRect(e,i,0,0);this.pointerRect=n,this.edges.map(r=>{if(r.to==="POINTER"){this.updateEdges();return}}),this.edgesArgs.map(r=>{if(r.to==="POINTER"){this.updateEdges();return}})}async ngAfterViewInit(){setTimeout(()=>this.updateEdges()),this.onlyPipelines||this.hideArgs.set(!0),this.hideArgs()&&(this.hideArgs.set(!1),setTimeout(()=>this.hideArgs.set(!0)))}addEdge(t){this.removePointer(),t.from.includes("output")?this.edges.push({from:t.from,to:t.to}):this.edgesArgs.push({from:t.from,to:t.to}),this.updateEdges()}removeEdge(t){this.edges=this.edges.filter(e=>!(e.from===t.from&&e.to===t.to)),this.edgesArgs=this.edgesArgs.filter(e=>!(e.from===t.from&&e.to===t.to))}replacePointer(t){t.id.endsWith("input")||t.id.endsWith("input2")?this.edges=this.edges.map(e=>e.to==="POINTER"?e.from.split(".")[0]===t.id.split(".")[0]?e:{from:e.from,to:t.id}:e.to===t.id?{from:e.from,to:"POINTER"}:e):this.edgesArgs=this.edgesArgs.map(e=>e.to==="POINTER"?e.from.split(".")[0]===t.id.split(".")[0]?e:{from:e.from,to:t.id}:e.to.startsWith(t.id)?{from:e.from,to:"POINTER"}:e),this.updateEdges()}removePointer(){this.edges=this.edges.filter(t=>t.to!=="POINTER"),this.edgesArgs=this.edgesArgs.filter(t=>t.to!=="POINTER"),this.updateEdges()}onNodePointerDown(t){t.stopPropagation()}async onWorkspacePointerDown(t){this.edges=this.edges.filter(e=>e.to!=="POINTER"),this.edgesArgs=this.edgesArgs.filter(e=>e.to!=="POINTER"),this.updateEdges(),this.selectedNode.set("")}toggleArguments(t){t==="true"?(this.hideArgs.set(!0),this.updateEdges()):(this.hideArgs.set(!1),this.updateEdges())}isInputNotUsed(t){return!this.edges.some(e=>e.to===t)}onNodeClick(t){this.selectedNode.set(t.id)}onKey(t){t.key==="Delete"?this.selectedNode()!==null&&(this.nodes=this.nodes.filter(e=>e.id!==this.selectedNode()),this.edges=this.edges.filter(e=>!e.from.startsWith(this.selectedNode())),this.edges=this.edges.filter(e=>!e.to.startsWith(this.selectedNode())),this.edgesArgs=this.edgesArgs.filter(e=>!e.from.startsWith(this.selectedNode())),this.edgesArgs=this.edgesArgs.filter(e=>!e.to.startsWith(this.selectedNode())),this.selectedNode.set(""),this.updateEdges()):t.key==="Escape"&&(this.selectedNode.set(""),this.removePointer())}async runPipeline(){await this.pipelineControllerService.runPipeline(this.nodes,this.edges,this.edgesArgs)}toogleTreeFn(){this.toogleTree.set(!this.toogleTree())}addNode(t){if(console.log(t),!t.kernel)return;let{x:e,y:i}=this.nodePosition(),n={id:crypto.randomUUID(),x:e,y:i,node:t.kernel};console.log(n),this.nodes=[...this.nodes,n]}nodePosition(){if(this.nodes.length===0)return{x:yi,y:bi};for(let e=0;e<ll;e++)for(let i=0;i<cl;i++){let n={x:yi+e*(an+ct),y:bi+i*(sn+ct)};if(!this.nodes.some(a=>this.intersects(n,a)))return n}let t=Math.max(...this.nodes.map(e=>e.y));return{x:yi+Math.random()*1400,y:bi+Math.random()*500}}intersects(t,e){return!(t.x+an+ct<=e.x||t.x>=e.x+an+ct||t.y+sn+ct<=e.y||t.y>=e.y+sn+ct)}setOffset(t){yi=t.x,bi=t.y}childrenAccessor=t=>t.children??[];hasChild=(t,e)=>!!e.children&&e.children.length>0;unwrapTSKernel=_i;static \u0275fac=function(e){return new(e||o)(At(no),At(ke),At(vi))};static \u0275cmp=B({type:o,selectors:[["app-pipeline-controller"]],inputs:{nodes:"nodes",edges:"edges",edgesArgs:"edgesArgs",width:"width",height:"height",onlyPipelines:"onlyPipelines",run:"run"},features:[we],decls:8,vars:1,consts:[["toolbarTemplate",""],["treePanelTemplate",""],["pipelineTemplate",""],["tree",""],["canvas",""],[1,"toolbar","padding-top-medium","padding-right-large","flex-row","items-right"],["label","Only main signal flow",1,"z-index-100","margin-right-medium",3,"valueChange","value","sessionStorage"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",3,"click",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","",3,"cdkTreeNodeTypeaheadLabel",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding","",3,"click"],[1,"node-to-drag","flex-row","content-center","padding-right-medium"],["matIconButton","","disabled",""],["matTreeNodePadding","","matTreeNodeToggle","",3,"cdkTreeNodeTypeaheadLabel"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],["tabindex","0",1,"pipeline-root",3,"mousemove","pointerdown","keydown"],[1,"edges-layer"],["stroke-width","4","stroke-dasharray","8 4","fill","none",1,"edge-dash"],[1,"edges-layer",3,"width","height"],["id","nodesLayer",1,"nodes-layer","padding-medium"],["]","",3,"id","x","y","node","hideArgs","selected"],["stroke-width","2","stroke-dasharray","3 3","fill","none"],["]","",3,"moved","addEdge","removeEdge","replacePointer","pointerdown","click","id","x","y","node","hideArgs","selected"],[4,"ngTemplateOutlet"],[1,"flex-column"],[1,"top-panel","animate-height","flex-row"],[1,"panel-corner","tree-panel","padding-top-medium","padding-left-medium"],[1,"width-100","animate-width","scroll-visible"],["width","100%",1,"panel-corner",3,"onResize","height"],["matIconButton","",1,"tree-button","margin-small",3,"click"],[1,"visualization-panel","panel-corner","animate-height"],["width","100%",3,"height"],[1,"toolbar","padding-top-medium","padding-right-medium","flex-row","items-right"],[1,"margin-right-medium",3,"valueChange","value","hideSingleSelectionIndicator"],["value","mainTop"],["value","mainBoth"],["value","mainBottom"],[1,"flex-row","height-100","padding-medium"],[1,"plot","panel-corner"],[3,"dataSource"]],template:function(e,i){e&1&&(Ve(0,js,2,2,"ng-template",null,0,Ht)(2,Qs,4,5,"ng-template",null,1,Ht)(4,el,9,17,"ng-template",null,2,Ht),z(6,rl,27,15)(7,sl,1,1,"ng-container")),e&2&&(_(6),K(i.onlyPipelines?7:6))},dependencies:[Ge,Kn,li,di,hi,Co,wo,xo,jt,$t,ot,Yt,mi,ar,ir,nr,rr,or,tr,io,eo,st],styles:["[_nghost-%COMP%]{--mat-button-toggle-height: 2rem;--mat-button-toggle-divider-color: var(--mat-sys-outline-variant);--mat-button-toggle-text-color: var(--mat-sys-outline);--mat-button-toggle-selected-state-text-color: var(--mat-sys-primary);--mat-tree-container-background-color: transparent;--mat-tree-node-min-height: 10}.draggable-size[_ngcontent-%COMP%]{width:5000px;height:2000px}.toolbar[_ngcontent-%COMP%]{position:absolute;right:0;z-index:99}.pipeline-root[_ngcontent-%COMP%]{position:relative;background-position:center;background-repeat:repeat;background-color:var(--mat-sys-surface-container-lowest)}.pipeline-root.no-background[_ngcontent-%COMP%]{background-color:transparent}.pipeline-root[_ngcontent-%COMP%]:focus{outline:none}.nodes-layer[_ngcontent-%COMP%]{position:absolute;background-position:center;background-repeat:repeat;inset:0;z-index:2;box-sizing:border-box}.edges-layer[_ngcontent-%COMP%]{position:absolute;inset:0;pointer-events:none;z-index:1}.edge-dash[_ngcontent-%COMP%]{stroke-dasharray:8 4;animation:_ngcontent-%COMP%_dash-flow .2s linear infinite}@keyframes _ngcontent-%COMP%_dash-flow{to{stroke-dashoffset:-12}}.visualization-panel[_ngcontent-%COMP%]{background-color:var(--mat-sys-surface-container);box-sizing:border-box}.plot[_ngcontent-%COMP%]{width:45vw;height:100%}.tree-button[_ngcontent-%COMP%]{position:fixed;z-index:99;color:var(--mat-sys-primary)}.tree-panel[_ngcontent-%COMP%]{background-color:var(--mat-sys-surface-container);-webkit-user-select:none;user-select:none;z-index:1000;flex:0 0 300px;transition:flex-basis .25s ease}.tree-panel.collapsed[_ngcontent-%COMP%]{margin:0;padding:0;flex-basis:0}mat-tree[_ngcontent-%COMP%]{width:auto}mat-tree.collapsed[_ngcontent-%COMP%]{width:0;overflow:hidden}.node-to-drag[_ngcontent-%COMP%]{border-radius:40px;cursor:grab;color:var(--mat-sys-primary)}.node-to-drag[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--mat-sys-secondary-container)}.node-to-drag[_ngcontent-%COMP%]:active{background-color:var(--mat-sys-surface-variant)}.top-panel.collapsed[_ngcontent-%COMP%]{gap:0!important}"]})};export{ni as a,ba as b,wa as c,xa as d,Ca as e,ur as f};
